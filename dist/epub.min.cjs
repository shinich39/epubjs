"use strict";var Ne=Object.defineProperty;var vi=Object.getOwnPropertyDescriptor;var wi=Object.getOwnPropertyNames;var bi=Object.prototype.hasOwnProperty;var Ai=(t,r)=>{for(var e in r)Ne(t,e,{get:r[e],enumerable:!0})},ki=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of wi(r))!bi.call(t,a)&&a!==e&&Ne(t,a,{get:()=>r[a],enumerable:!(n=vi(r,a))||n.enumerable});return t};var xi=t=>ki(Ne({},"__esModule",{value:!0}),t);var Do={};Ai(Do,{EPUB:()=>z});module.exports=xi(Do);var Ei=0;function Le(t){return typeof t=="boolean"}function le(t){return typeof t=="number"&&!Number.isNaN(t)&&Number.isFinite(t)}function Si(t){return Nt(t)?!Number.isNaN(parseFloat(t))&&Number.isFinite(parseFloat(t)):le(t)}function Nt(t){return typeof t=="string"}function Ci(t){return Nt(t)&&t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===""}function lt(t){return typeof t=="object"&&t!==null&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Oi(t){return lt(t)&&Object.keys(t).length===0}function ce(t){return typeof t=="object"&&t===null}function X(t){return Array&&Array.isArray?Array.isArray(t):Object.prototype.toString.call(t)==="[object Array]"}function zi(t){if(!X(t))return!1;for(let r of t)if(!Le(r))return!1;return!0}function Ti(t){if(!X(t))return!1;for(let r of t)if(!le(r))return!1;return!0}function $i(t){if(!X(t))return!1;for(let r of t)if(!Nt(r))return!1;return!0}function Di(t){if(!X(t))return!1;for(let r of t)if(!lt(r))return!1;return!0}function Ii(t){return X(t)&&t.length===0}function Me(t){return typeof t=="function"}function Fi(t){return t===void 0||ce(t)}function Bi(t){return t===void 0}function Pi(t,r){return typeof t==typeof r&&t.constructor===r.constructor}function Cr(t,r){return Math.random()*(r-t)+t}function Ri(t){return t.split(/([0-9]+)/)}function Ni(t){return t.split(/([0-9]{0,}\.{0,1}[0-9]{1,})+/)}function Ui(t){return t.replace(/[！-～]/g,function(r){return String.fromCharCode(r.charCodeAt(0)-65248)}).replace(/[^\S\r\n]/g,function(r){return" "})}function Li(t){return t.replace(/[!-~]/g,function(r){return String.fromCharCode(r.charCodeAt(0)+65248)}).replace(/[^\S\r\n]/g,function(r){return"\u3000"})}function Er(t,r){function e(i,s){let o=[];for(let u=0;u<i.length+1;u++){o.push([]);for(let h=0;h<s.length+1;h++)o[u][h]=0}return o}function n(i,s,o){for(let u=1;u<=s.length;u++)for(let h=1;h<=o.length;h++)s[u-1]===o[h-1]?i[u][h]=i[u-1][h-1]+1:i[u][h]=Math.max(i[u-1][h],i[u][h-1]);return i}function a(i,s,o){let u=0,h=1,l=-1,v=[],g=0,d=s.length,_=o.length;for(;d>0||_>0;){let x=v[v.length-1],k=s[d-1],y=o[_-1];d>0&&_>0&&k===y?(x&&x.type===u?x.value=k+x.value:v.push({type:u,value:k}),g++,d--,_--):_>0&&(d===0||i[d][_-1]>=i[d-1][_])?(x&&x.type===h?x.value=y+x.value:v.push({type:h,value:y}),_--):d>0&&(_===0||i[d][_-1]<i[d-1][_])&&(x&&x.type===l?x.value=k+x.value:v.push({type:l,value:k}),d--)}return{acc:g*2/(s.length+o.length),result:v.reverse()}}return a(n(e(t,r),t,r),t,r)}function Mi(){return Math.floor(new Date().getTime()/1e3).toString(16)+"xxxxxx".replace(/x/g,function(t){return Math.floor(Math.random()*16).toString(16)})+(Ei++).toString(16).padStart(6,"0")}function Zi(t,r){if(r.length===0)return t;let e="",n=0;for(;r.length<t.length;)r+=r;for(;n<t.length;)e+=String.fromCharCode(t.charCodeAt(n)^r.charCodeAt(n)),n++;return e}function ji(t){let r=[],e=0,n=t.replace(/\\'|\\"/g,"00"),a=null,i="";for(;e<t.length;)a?n[e]===a?(r.push(i),i="",a=null):i+=t[e]:n[e]==="'"||n[e]==='"'?a=t[e]:n[e]===" "?i!==""&&(r.push(i),i=""):i+=t[e],e++;return i.trim()!==""&&r.push(i),r}function Hi(t){let r=t.indexOf("?")>-1?t.split("?").pop():t,e={};for(let[n,a]of new URLSearchParams(r).entries())e[n]?e[n].push(a):e[n]=[a];return e}function Or(t,r){return t.replace(/\$\{[^}]+\}/g,function(e){let n=e.substring(2,e.length-1)??"";return n.indexOf(".")>-1?Or("${"+n.split(".").slice(1).join(".")+"}",r[n.split(".")[0]]):r[n]??""})}function Wi(t,r){let e=new Array(t);if(Me(r))for(let n=0;n<t;n++)e[n]=r(n);else if(lt(r))for(let n=0;n<t;n++)e[n]=clone(r);else if(X(r))for(let n=0;n<t;n++)e[n]=clone(r);else if(typeof r<"u")for(let n=0;n<t;n++)e[n]=r;return e}function Qi(t){return t.reduce(function(r,e){return e<r?e:r},t[0]||0)}function Xi(t){return t.reduce(function(r,e){return e>r?e:r},t[0]||0)}function Sr(t){return t.reduce(function(r,e){return r+e},0)/t.length}function Ki(t){let r={},e=t[0],n=1;for(let a=0;a<t.length;a++){let i=t[a];r[i]=r[i]?r[i]+1:1,r[i]>n&&(e=i,n=r[i])}return e}function Yi(t){let r=[Bi,ce,Le,le,Nt,lt,X,Me];return t.sort(function(e,n){let a=r.findIndex(function(s){return s(e)}),i=r.findIndex(function(s){return s(n)});return a!==i?a-i:a===0||a===1?0:a===2?e!==n?e?1:-1:0:a===3?e-n:a===4?e.localeCompare(n,void 0,{numeric:!0,sensitivity:"base"}):a===5?Object.keys(e).length-Object.keys(n).length:a===6?e.length-n.length:0})}function Gi(t){let r=t.length;for(;r>0;){let e=Math.floor(Math.random()*r);r--,[t[r],t[e]]=[t[e],t[r]]}return t}function Vi(t){return t[Math.floor(Cr(0,t.length))]}function Ji(t){function r(s){if(s.length<1)return;let o=[];for(let u=0;u<s.length;u++)o.push(0);return o}function e(s,o){for(let u=s.length-1;u>=0;u--){if(o[u]<s[u].length-1)return o[u]+=1,o;o[u]=0}}function n(s,o){let u=[];for(let h=0;h<s.length;h++)u.push(s[h][o[h]]);return u}let a=[],i=r(t);for(;i;){let s=n(t,i);a.push(s),i=e(t,i)}return a}function Ue(t){let r=X(t)?[]:{};for(let[e,n]of Object.entries(t))r[e]=lt(n)&&!ce(n)?Ue(n):n;return r}function qi(t,r){let e={};for(let n of t)e[String(n[r])]?e[String(n[r])].push(n):e[String(n[r])]=[n];return e}function ta(t,r){let e={and:["$and"],notAnd:["$notAnd","$nand"],or:["$or"],notOr:["$notOr","$nor"],not:["$not"],include:["$include","$in"],exclude:["$exclude","$nin"],greaterThan:["$greaterThan","$gt"],greaterThanOrEqual:["$greaterThanOrEqual","$gte"],lessThan:["$lessThan","$lt"],lessThanOrEqual:["$lessThanOrEqual","$lte"],equal:["$equal","$eq"],notEqual:["$notEqual","$neq","$ne"],function:["$function","$func","$fn"],regexp:["$regexp","$regex","$re","$reg"]};function n(s,o){for(let[u,h]of Object.entries(o))if(!a(s,h,u.split(".")))return!1;return!0}function a(s,o,u){let h=u.shift();return u.length>0?lt(s)?a(s[h],o,u):!1:i(s,o,h)}function i(s,o,u){if(e.and.indexOf(u)>-1){for(let h of o)if(!n(s,h))return!1;return!0}else{if(e.notAnd.indexOf(u)>-1)return!i(s,o,"$and");if(e.or.indexOf(u)>-1){for(let h of o)if(n(s,h))return!0;return!1}else{if(e.notOr.indexOf(u)>-1)return!i(s,o,"$or");if(e.not.indexOf(u)>-1)return!n(s,o);if(e.include.indexOf(u)>-1)if(X(s)){for(let h of s)if(!i(h,o,"$include"))return!1;return!0}else{for(let h of o)if(i(s,h,"$equal"))return!0;return!1}else{if(e.exclude.indexOf(u)>-1)return!i(s,o,"$include");if(e.greaterThan.indexOf(u)>-1)return s>o;if(e.greaterThanOrEqual.indexOf(u)>-1)return s>=o;if(e.lessThan.indexOf(u)>-1)return s<o;if(e.lessThanOrEqual.indexOf(u)>-1)return s<=o;if(e.equal.indexOf(u)>-1)if(X(s)&&X(o)){if(s.length!==o.length)return!1;for(let h=0;h<o.length;h++)if(s[h]!==o[h])return!1;return!0}else return s===o;else return e.notEqual.indexOf(u)>-1?!i(s,o,"$equal"):e.function.indexOf(u)>-1?o(s):e.regexp.indexOf(u)>-1?o.test(s):lt(s)?lt(o)?n(s[u],o):i(s[u],o,"$equal"):!1}}}}return n(t,r)}function ea(t,r){let e=t.width/t.height;return e<r.width/r.height?{width:r.height*e,height:r.height}:{width:r.width,height:r.width/e}}function ra(t,r){let e=t.width/t.height;return e<r.width/r.height?{width:r.width,height:r.width/e}:{width:r.height*e,height:r.height}}function na(t){return new Promise(function(r){return setTimeout(r,t)})}function ia(t){return t.reduce(function(r,e){return r.then(function(n){return e().then(function(a){return n.concat([a])})})},Promise.resolve([]))}var aa={isBoolean:Le,isNumber:le,isNumeric:Si,isString:Nt,isEmptyString:Ci,isObject:lt,isEmptyObject:Oi,isNull:ce,isArray:X,isBooleanArray:zi,isNumberArray:Ti,isStringArray:$i,isObjectArray:Di,isEmptyArray:Ii,isFunction:Me,isEmpty:Fi,isSameType:Pi,random:Cr,id:Mi,xor:Zi,splitInt:Ri,splitFloat:Ni,toHalfWidth:Ui,toFullWidth:Li,diff:Er,compare:Er,parseCommand:ji,parseQuery:Hi,parseTemplate:Or,min:Qi,max:Xi,avg:Sr,mean:Sr,mode:Ki,choose:Vi,array:Wi,sort:Yi,shuffle:Gi,cases:Ji,copy:Ue,clone:Ue,group:qi,query:ta,contain:ea,cover:ra,wait:na,promiseAll:ia},K=aa;var st={Promise},sa={base64:!0,array:!0,string:!0,nodebuffer:!1,nodestream:!1,get arraybuffer(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"},get uint8array(){return typeof Uint8Array<"u"},get blob(){return wn()}},wn=function(){var t;if(typeof ArrayBuffer>"u")t=!1;else{var r=new ArrayBuffer(0);try{t=new Blob([r],{type:"application/zip"}).size===0}catch{t=!1}}return wn=function(){return t},t},M=sa,it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",oa=function(t){for(var r,e,n,a,i,s,o,u=[],h=0,l=t.length,v=l,g=typeof t!="string";h<t.length;)v=l-h,g?(r=t[h++],e=h<l?t[h++]:0,n=h<l?t[h++]:0):(r=t.charCodeAt(h++),e=h<l?t.charCodeAt(h++):0,n=h<l?t.charCodeAt(h++):0),a=r>>2,i=(3&r)<<4|e>>4,s=v>1?(15&e)<<2|n>>6:64,o=v>2?63&n:64,u.push(it.charAt(a)+it.charAt(i)+it.charAt(s)+it.charAt(o));return u.join("")},ha=function(t){var r,e,n,a,i,s,o=0,u=0,h="data:";if(t.substr(0,5)===h)throw new Error("Invalid base64 input, it looks like a data url.");var l,v=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===it.charAt(64)&&v--,t.charAt(t.length-2)===it.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=M.uint8array?new Uint8Array(0|v):new Array(0|v);o<t.length;)r=it.indexOf(t.charAt(o++))<<2|(a=it.indexOf(t.charAt(o++)))>>4,e=(15&a)<<4|(i=it.indexOf(t.charAt(o++)))>>2,n=(3&i)<<6|(s=it.indexOf(t.charAt(o++))),l[u++]=r,i!==64&&(l[u++]=e),s!==64&&(l[u++]=n);return l};function ua(t){return er(t,M.uint8array?new Uint8Array(t.length):new Array(t.length))}var la=function(t,r){return re("blob"),new Blob([t],{type:r})};function de(t){return t}function er(t,r){for(var e=0;e<t.length;++e)r[e]=255&t.charCodeAt(e);return r}function ca(t,r,e){var n=[],a=0,i=t.length;if(i<=e)return String.fromCharCode.apply(null,t);for(;a<i;)r==="array"?n.push(String.fromCharCode.apply(null,t.slice(a,Math.min(a+e,i)))):n.push(String.fromCharCode.apply(null,t.subarray(a,Math.min(a+e,i)))),a+=e;return n.join("")}function da(t){for(var r="",e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return r}var bn=function(){var t;try{t=M.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{t=!1}return bn=function(){return t},t};function ve(t){var r=65536,e=St(t),n=!0;if(e==="uint8array"&&(n=bn()),n)for(;r>1;)try{return ca(t,e,r)}catch{r=Math.floor(r/2)}return da(t)}var fa=ve;function zr(t,r){for(var e=0;e<t.length;e++)r[e]=t[e];return r}var An={string:{string:de,array:function(t){return er(t,new Array(t.length))},arraybuffer:function(t){return An.string.uint8array(t).buffer},uint8array:function(t){return er(t,new Uint8Array(t.length))}},array:{string:ve,array:de,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)}},arraybuffer:{string:function(t){return ve(new Uint8Array(t))},array:function(t){return zr(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:de,uint8array:function(t){return new Uint8Array(t)}},uint8array:{string:ve,array:function(t){return zr(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:de}},P=function(t,r){if(r||(r=""),!t)return r;re(t);var e=St(r);return An[e][t](r)},St=function(t){return typeof t=="string"?"string":Object.prototype.toString.call(t)==="[object Array]"?"array":M.uint8array&&t instanceof Uint8Array?"uint8array":M.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},re=function(t){if(!M[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},fe=65535,It=-1,rr=function(t){var r,e,n="";for(e=0;e<(t||"").length;e++)n+="\\x"+((r=t.charCodeAt(e))<16?"0":"")+r.toString(16).toUpperCase();return n},Te=function(t,r,e){setTimeout(function(){t.apply(e||null,r||[])},0)},pr=function(){var t,r,e=arguments,n={};for(t=0;t<arguments.length;t++)for(r in arguments[t])Object.hasOwnProperty.call(e[t],r)&&n[r]===void 0&&(n[r]=e[t][r]);return n},kn=function(t,r,e,n,a){return st.Promise.resolve(r).then(function(i){return M.blob&&(i instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(i))!==-1)&&typeof FileReader<"u"?new st.Promise(function(s,o){var u=new FileReader;u.onload=function(h){s(h.target.result)},u.onerror=function(h){o(h.target.error)},u.readAsArrayBuffer(i)}):i}).then(function(i){var s=St(i);return s?(s==="arraybuffer"?i=P("uint8array",i):s==="string"&&(a?i=ha(i):e&&n!==!0&&(i=ua(i))),i):st.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})},U=function(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null};U.prototype.push=function(t){this.emit("data",t)},U.prototype.end=function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},U.prototype.error=function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},U.prototype.on=function(t,r){return this._listeners[t].push(r),this},U.prototype.cleanUp=function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},U.prototype.emit=function(t,r){if(this._listeners[t])for(var e=0;e<this._listeners[t].length;e++)this._listeners[t][e].call(this,r)},U.prototype.pipe=function(t){return t.registerPrevious(this)},U.prototype.registerPrevious=function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var r=this;return t.on("data",function(e){r.processChunk(e)}),t.on("end",function(){r.end()}),t.on("error",function(e){r.error(e)}),this},U.prototype.pause=function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},U.prototype.resume=function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},U.prototype.flush=function(){},U.prototype.processChunk=function(t){this.push(t)},U.prototype.withStreamInfo=function(t,r){return this.extraStreamInfo[t]=r,this.mergeStreamInfo(),this},U.prototype.mergeStreamInfo=function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},U.prototype.lock=function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},U.prototype.toString=function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t};var j=U,_r=function(t){for(var r=new Array(256),e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;return r[254]=r[254]=1,_r=function(n){return r[n]},r[t]},pa=function(t){var r,e,n,a,i,s=t.length,o=0;for(a=0;a<s;a++)(64512&(e=t.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=t.charCodeAt(a+1)))==56320&&(e=65536+(e-55296<<10)+(n-56320),a++),o+=e<128?1:e<2048?2:e<65536?3:4;for(r=M.uint8array?new Uint8Array(o):new Array(o),i=0,a=0;i<o;a++)(64512&(e=t.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=t.charCodeAt(a+1)))==56320&&(e=65536+(e-55296<<10)+(n-56320),a++),e<128?r[i++]=e:e<2048?(r[i++]=192|e>>>6,r[i++]=128|63&e):e<65536?(r[i++]=224|e>>>12,r[i++]=128|e>>>6&63,r[i++]=128|63&e):(r[i++]=240|e>>>18,r[i++]=128|e>>>12&63,r[i++]=128|e>>>6&63,r[i++]=128|63&e);return r},_a=function(t,r){var e;for((r=r||t.length)>t.length&&(r=t.length),e=r-1;e>=0&&(192&t[e])==128;)e--;return e<0||e===0?r:e+_r(t[e])>r?e:r},ma=function(t){var r,e,n,a,i=t.length,s=new Array(2*i);for(e=0,r=0;r<i;)if((n=t[r++])<128)s[e++]=n;else if((a=_r(n))>4)s[e++]=65533,r+=a-1;else{for(n&=a===2?31:a===3?15:7;a>1&&r<i;)n=n<<6|63&t[r++],a--;a>1?s[e++]=65533:n<65536?s[e++]=n:(n-=65536,s[e++]=55296|n>>10&1023,s[e++]=56320|1023&n)}return s.length!==e&&(s.subarray?s=s.subarray(0,e):s.length=e),fa(s)},Qt=function(t){return pa(t)},wt=function(t){return t=P(M.uint8array?"uint8array":"array",t),ma(t)},ga=function(t){function r(){t.call(this,"utf-8 decode"),this.leftOver=null}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.processChunk=function(e){var n=P(M.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(M.uint8array){var a=n;(n=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),n.set(a,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var i=_a(n),s=n;i!==n.length&&(M.uint8array?(s=n.subarray(0,i),this.leftOver=n.subarray(i,n.length)):(s=n.slice(0,i),this.leftOver=n.slice(i,n.length))),this.push({data:wt(s),meta:e.meta})},r.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:wt(this.leftOver),meta:{}}),this.leftOver=null)},r}(j),Tr=function(t){function r(){t.call(this,"utf-8 encode")}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.processChunk=function(e){this.push({data:Qt(e.data),meta:e.meta})},r}(j),ya=function(t){function r(e){t.call(this,"ConvertWorker to "+e),this.destType=e}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.processChunk=function(e){this.push({data:P(this.destType,e.data),meta:e.meta})},r}(j),va=ya;function wa(t,r,e){switch(t){case"blob":return la(P("arraybuffer",r),e);case"base64":return oa(r);default:return P(t,r)}}function ba(t,r){var e,n=0,a=null,i=0;for(e=0;e<r.length;e++)i+=r[e].length;switch(t){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(a=new Uint8Array(i),e=0;e<r.length;e++)a.set(r[e],n),n+=r[e].length;return a;default:throw new Error("concat : unsupported type '"+t+"'")}}function Aa(t,r){return new st.Promise(function(e,n){var a=[],i=t._internalType,s=t._outputType,o=t._mimeType;t.on("data",function(u,h){a.push(u),r&&r(h)}).on("error",function(u){a=[],n(u)}).on("end",function(){try{var u=wa(s,ba(i,a),o);e(u)}catch(h){n(h)}a=[]}).resume()})}var Mt=function(t,r,e){var n=r;switch(r){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=r,this._mimeType=e,re(n),this._worker=t.pipe(new va(n)),t.lock()}catch(a){this._worker=new j("error"),this._worker.error(a)}};Mt.prototype.accumulate=function(t){return Aa(this,t)},Mt.prototype.on=function(t,r){var e=this;return t==="data"?this._worker.on(t,function(n){r.call(e,n.data,n.meta)}):this._worker.on(t,function(){Te(r,arguments,e)}),this},Mt.prototype.resume=function(){return Te(this._worker.resume,[],this._worker),this},Mt.prototype.pause=function(){return this._worker.pause(),this};var xn=Mt,ka=!1,xa=!1,Ea=!1,En=!0,Sa=null,Ca=null,Oa=null,za=null,Ta=null,$a=null,Sn=Object.freeze({__proto__:null,base64:ka,binary:xa,dir:Ea,createFolders:En,date:Sa,compression:Ca,compressionOptions:Oa,comment:za,unixPermissions:Ta,dosPermissions:$a}),Da=16384,Ia=function(t){function r(e){t.call(this,"DataWorker");var n=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(a){n.dataIsReady=!0,n.data=a,n.max=a&&a.length||0,n.type=St(a),n.isPaused||n._tickAndRepeat()},function(a){n.error(a)})}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.cleanUp=function(){t.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,Te(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(Te(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=Da,n=null,a=Math.min(this.max,this.index+e);if(this.index>=this.max)return this.end();switch(this.type){case"string":n=this.data.substring(this.index,a);break;case"uint8array":n=this.data.subarray(this.index,a);break;case"array":n=this.data.slice(this.index,a)}return this.index=a,this.push({data:n,meta:{percent:this.max?this.index/this.max*100:0}})},r}(j),nr=Ia,Fa=function(t){function r(e){t.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.processChunk=function(e){if(e){var n=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=n+e.data.length}t.prototype.processChunk.call(this,e)},r}(j),Ze=Fa,mr=function(){for(var t=[],r=0;r<256;r++){for(var e=r,n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return mr=function(){return t},t};function Ba(t,r,e,n){var a=mr(),i=n+e;t^=-1;for(var s=n;s<i;s++)t=t>>>8^a[255&(t^r[s])];return-1^t}function Pa(t,r,e,n){var a=mr(),i=n+e;t^=-1;for(var s=n;s<i;s++)t=t>>>8^a[255&(t^r.charCodeAt(s))];return-1^t}function Vt(t,r){return t!==void 0&&t.length?St(t)!=="string"?Ba(0|r,t,t.length,0):Pa(0|r,t,t.length,0):0}var Ra=function(t){function r(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.processChunk=function(e){this.streamInfo.crc32=Vt(e.data,this.streamInfo.crc32||0),this.push(e)},r}(j),Cn=Ra,we=function(t,r,e,n,a){this.compressedSize=t,this.uncompressedSize=r,this.crc32=e,this.compression=n,this.compressedContent=a};we.prototype.getContentWorker=function(){var t=new nr(st.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Ze("data_length")),r=this;return t.on("end",function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},we.prototype.getCompressedWorker=function(){return new nr(st.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)},we.createWorkerFrom=function(t,r,e){return t.pipe(new Cn).pipe(new Ze("uncompressedSize")).pipe(r.compressWorker(e)).pipe(new Ze("compressedSize")).withStreamInfo("compression",r)};var Ft=we,Zt=function(t,r,e){this.name=t,this.dir=e.dir,this.date=e.date,this.comment=e.comment,this.unixPermissions=e.unixPermissions,this.dosPermissions=e.dosPermissions,this._data=r,this._dataBinary=e.binary,this.options={compression:e.compression,compressionOptions:e.compressionOptions}};Zt.prototype.internalStream=function(t){var r=null,e="string";try{if(!t)throw new Error("No output type specified.");var n=(e=t.toLowerCase())==="string"||e==="text";e!=="binarystring"&&e!=="text"||(e="string"),r=this._decompressWorker();var a=!this._dataBinary;a&&!n&&(r=r.pipe(new Tr)),!a&&n&&(r=r.pipe(new ga))}catch(i){(r=new j("error")).error(i)}return new xn(r,e,"")},Zt.prototype.async=function(t,r){return this.internalStream(t).accumulate(r)},Zt.prototype._compressWorker=function(t,r){if(this._data instanceof Ft&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var e=this._decompressWorker();return this._dataBinary||(e=e.pipe(new Tr)),Ft.createWorkerFrom(e,t,r)},Zt.prototype._decompressWorker=function(){return this._data instanceof Ft?this._data.getContentWorker():this._data instanceof j?this._data:new nr(this._data)};var Na=Zt,ot=0,Ua=1,$e=2,La=3,Z=4,$r=5,F=0,mt=1,Ma=2,G=-2,Za=-3,be=-5,On=-1,ja=1,pe=2,Ha=3,zn=4,Wa=0,Dr=0,Ir=1,Tn=2,Fe=8;function Qa(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function $n(t){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var e=r.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(var n in e)Qa(e,n)&&(t[n]=e[n])}}return t}function De(t,r){return t.length===r?t:t.subarray?t.subarray(0,r):(t.length=r,t)}var ne={arraySet:function(t,r,e,n,a){if(r.subarray&&t.subarray)t.set(r.subarray(e,e+n),a);else for(var i=0;i<n;i++)t[a+i]=r[e+i]},flattenChunks:function(t){var r,e,n,a,i,s;for(n=0,r=0,e=t.length;r<e;r++)n+=t[r].length;for(s=new Uint8Array(n),a=0,r=0,e=t.length;r<e;r++)i=t[r],s.set(i,a),a+=i.length;return s},Buf8:function(t){return new Uint8Array(t)},Buf16:function(t){return new Uint16Array(t)},Buf32:function(t){return new Int32Array(t)}},ie={arraySet:function(t,r,e,n,a){for(var i=0;i<n;i++)t[a+i]=r[e+i]},flattenChunks:function(t){return[].concat.apply([],t)},Buf8:function(t){return new Array(t)},Buf16:function(t){return new Array(t)},Buf32:function(t){return new Array(t)}},Bt=function(){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";return Bt=function(){return t},t},V=function(t,r,e,n,a){return(V=Bt()?ne.arraySet:ie.arraySet)(t,r,e,n,a)},gr=function(t){return(gr=Bt()?ne.flattenChunks:ie.flattenChunks)(t)},ft=function(t){return(ft=Bt()?ne.Buf8:ie.Buf8)(t)},Q=function(t){return(Q=Bt()?ne.Buf16:ie.Buf16)(t)},Jt=function(t){return(Jt=Bt()?ne.Buf32:ie.Buf32)(t)},Dn=function(){var t=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}return Dn=function(){return t},t},In=function(){var t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}return In=function(){return t},t},yr=function(t){for(var r=ft(256),e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;return r[254]=r[254]=1,yr=function(n){return r[n]},r[t]};function Be(t){var r,e,n,a,i,s=t.length,o=0;for(a=0;a<s;a++)(64512&(e=t.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=t.charCodeAt(a+1)))==56320&&(e=65536+(e-55296<<10)+(n-56320),a++),o+=e<128?1:e<2048?2:e<65536?3:4;for(r=new Uint8Array(o),i=0,a=0;i<o;a++)(64512&(e=t.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=t.charCodeAt(a+1)))==56320&&(e=65536+(e-55296<<10)+(n-56320),a++),e<128?r[i++]=e:e<2048?(r[i++]=192|e>>>6,r[i++]=128|63&e):e<65536?(r[i++]=224|e>>>12,r[i++]=128|e>>>6&63,r[i++]=128|63&e):(r[i++]=240|e>>>18,r[i++]=128|e>>>12&63,r[i++]=128|e>>>6&63,r[i++]=128|63&e);return r}function Fn(t,r){if(r<65534&&(t.subarray&&In()||!t.subarray&&Dn()))return String.fromCharCode.apply(null,De(t,r));for(var e="",n=0;n<r;n++)e+=String.fromCharCode(t[n]);return e}function Xa(t){return Fn(t,t.length)}function Ka(t){for(var r=new Uint8Array(t.length),e=0,n=r.length;e<n;e++)r[e]=t.charCodeAt(e);return r}function Ya(t,r){var e,n,a,i,s=r||t.length,o=new Array(2*s);for(n=0,e=0;e<s;)if((a=t[e++])<128)o[n++]=a;else if((i=yr(a))>4)o[n++]=65533,e+=i-1;else{for(a&=i===2?31:i===3?15:7;i>1&&e<s;)a=a<<6|63&t[e++],i--;i>1?o[n++]=65533:a<65536?o[n++]=a:(a-=65536,o[n++]=55296|a>>10&1023,o[n++]=56320|1023&a)}return Fn(o,n)}function Ga(t,r){var e;for((r=r||t.length)>t.length&&(r=t.length),e=r-1;e>=0&&(192&t[e])==128;)e--;return e<0||e===0?r:e+yr(t[e])>r?e:r}function qt(t,r,e,n){for(var a=65535&t|0,i=t>>>16&65535|0,s=0;e!==0;){e-=s=e>2e3?2e3:e;do i=i+(a=a+r[n++]|0)|0;while(--s);a%=65521,i%=65521}return a|i<<16|0}function Va(){for(var t,r=[],e=0;e<256;e++){t=e;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;r[e]=t}return r}var Bn=function(){var t=Va();return Bn=function(){return t},t};function R(t,r,e,n){var a=Bn(),i=n+e;t^=-1;for(var s=n;s<i;s++)t=t>>>8^a[255&(t^r[s])];return-1^t}var _e=30,Ja=12;function qa(t,r){var e,n,a,i,s,o,u,h,l,v,g,d,_,x,k,y,c,f,p,b,w,m,S,O,A;e=t.state,n=t.next_in,O=t.input,a=n+(t.avail_in-5),i=t.next_out,A=t.output,s=i-(r-t.avail_out),o=i+(t.avail_out-257),u=e.dmax,h=e.wsize,l=e.whave,v=e.wnext,g=e.window,d=e.hold,_=e.bits,x=e.lencode,k=e.distcode,y=(1<<e.lenbits)-1,c=(1<<e.distbits)-1;t:do{_<15&&(d+=O[n++]<<_,_+=8,d+=O[n++]<<_,_+=8),f=x[d&y];e:for(;;){if(d>>>=p=f>>>24,_-=p,(p=f>>>16&255)===0)A[i++]=65535&f;else{if(!(16&p)){if(!(64&p)){f=x[(65535&f)+(d&(1<<p)-1)];continue e}if(32&p){e.mode=Ja;break t}t.msg="invalid literal/length code",e.mode=_e;break t}b=65535&f,(p&=15)&&(_<p&&(d+=O[n++]<<_,_+=8),b+=d&(1<<p)-1,d>>>=p,_-=p),_<15&&(d+=O[n++]<<_,_+=8,d+=O[n++]<<_,_+=8),f=k[d&c];r:for(;;){if(d>>>=p=f>>>24,_-=p,!(16&(p=f>>>16&255))){if(!(64&p)){f=k[(65535&f)+(d&(1<<p)-1)];continue r}t.msg="invalid distance code",e.mode=_e;break t}if(w=65535&f,_<(p&=15)&&(d+=O[n++]<<_,(_+=8)<p&&(d+=O[n++]<<_,_+=8)),(w+=d&(1<<p)-1)>u){t.msg="invalid distance too far back",e.mode=_e;break t}if(d>>>=p,_-=p,w>(p=i-s)){if((p=w-p)>l&&e.sane){t.msg="invalid distance too far back",e.mode=_e;break t}if(m=0,S=g,v===0){if(m+=h-p,p<b){b-=p;do A[i++]=g[m++];while(--p);m=i-w,S=A}}else if(v<p){if(m+=h+v-p,(p-=v)<b){b-=p;do A[i++]=g[m++];while(--p);if(m=0,v<b){b-=p=v;do A[i++]=g[m++];while(--p);m=i-w,S=A}}}else if(m+=v-p,p<b){b-=p;do A[i++]=g[m++];while(--p);m=i-w,S=A}for(;b>2;)A[i++]=S[m++],A[i++]=S[m++],A[i++]=S[m++],b-=3;b&&(A[i++]=S[m++],b>1&&(A[i++]=S[m++]))}else{m=i-w;do A[i++]=A[m++],A[i++]=A[m++],A[i++]=A[m++],b-=3;while(b>2);b&&(A[i++]=A[m++],b>1&&(A[i++]=A[m++]))}break}}break}}while(n<a&&i<o);n-=b=_>>3,d&=(1<<(_-=b<<3))-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?a-n+5:5-(n-a),t.avail_out=i<o?o-i+257:257-(i-o),e.hold=d,e.bits=_}var zt=15,Fr=852,Br=592,Pr=0,je=1,Rr=2,ts=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],es=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],rs=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ns=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function Xt(t,r,e,n,a,i,s,o){var u,h,l,v,g,d,_,x,k,y=o.bits,c=0,f=0,p=0,b=0,w=0,m=0,S=0,O=0,A=0,E=0,ht=null,oe=0,rt=Q(zt+1),Ct=Q(zt+1),Ot=null,he=0;for(c=0;c<=zt;c++)rt[c]=0;for(f=0;f<n;f++)rt[r[e+f]]++;for(w=y,b=zt;b>=1&&rt[b]===0;b--);if(w>b&&(w=b),b===0)return a[i++]=20971520,a[i++]=20971520,o.bits=1,0;for(p=1;p<b&&rt[p]===0;p++);for(w<p&&(w=p),O=1,c=1;c<=zt;c++)if(O<<=1,(O-=rt[c])<0)return-1;if(O>0&&(t===Pr||b!==1))return-1;for(Ct[1]=0,c=1;c<zt;c++)Ct[c+1]=Ct[c]+rt[c];for(f=0;f<n;f++)r[e+f]!==0&&(s[Ct[r[e+f]]++]=f);if(t===Pr?(ht=Ot=s,d=19):t===je?(ht=ts,oe-=257,Ot=es,he-=257,d=256):(ht=rs,Ot=ns,d=-1),E=0,f=0,c=p,g=i,m=w,S=0,l=-1,v=(A=1<<w)-1,t===je&&A>Fr||t===Rr&&A>Br)return 1;for(;;){_=c-S,s[f]<d?(x=0,k=s[f]):s[f]>d?(x=Ot[he+s[f]],k=ht[oe+s[f]]):(x=96,k=0),u=1<<c-S,p=h=1<<m;do a[g+(E>>S)+(h-=u)]=_<<24|x<<16|k|0;while(h!==0);for(u=1<<c-1;E&u;)u>>=1;if(u!==0?(E&=u-1,E+=u):E=0,f++,--rt[c]==0){if(c===b)break;c=r[e+s[f]]}if(c>w&&(E&v)!==l){for(S===0&&(S=w),g+=p,O=1<<(m=c-S);m+S<b&&!((O-=rt[m+S])<=0);)m++,O<<=1;if(A+=1<<m,t===je&&A>Fr||t===Rr&&A>Br)return 1;a[l=E&v]=w<<24|m<<16|g-i|0}}return E!==0&&(a[g+E]=c-S<<24|64<<16|0),o.bits=w,0}var is=0,Pn=1,Rn=2,Nr=4,as=5,me=6,kt=0,ss=1,os=2,J=-2,Nn=-3,Un=-4,hs=-5,Ur=8,Ln=1,Lr=2,Mr=3,Zr=4,jr=5,Hr=6,Wr=7,Qr=8,Xr=9,Kr=10,Ie=11,ct=12,He=13,Yr=14,We=15,Gr=16,Vr=17,Jr=18,qr=19,ge=20,ye=21,tn=22,en=23,rn=24,nn=25,an=26,Qe=27,sn=28,on=29,D=30,Mn=31;var us=852,ls=592;function hn(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function cs(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=Q(320),this.work=Q(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ds(t){var r;return t&&t.state?(r=t.state,t.total_in=t.total_out=r.total=0,t.msg="",r.wrap&&(t.adler=1&r.wrap),r.mode=Ln,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=Jt(us),r.distcode=r.distdyn=Jt(ls),r.sane=1,r.back=-1,kt):J}function fs(t){var r;return t&&t.state?((r=t.state).wsize=0,r.whave=0,r.wnext=0,ds(t)):J}function ps(t,r){var e,n;return t&&t.state?(n=t.state,r<0?(e=0,r=-r):(e=1+(r>>4),r<48&&(r&=15)),r&&(r<8||r>15)?J:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=e,n.wbits=r,fs(t))):J}function _s(t,r){var e,n;return t?(n=new cs,t.state=n,n.window=null,(e=ps(t,r))!==kt&&(t.state=null),e):J}var Xe,Ke,un=!0;function ms(t){if(un){var r;for(Xe=Jt(512),Ke=Jt(32),r=0;r<144;)t.lens[r++]=8;for(;r<256;)t.lens[r++]=9;for(;r<280;)t.lens[r++]=7;for(;r<288;)t.lens[r++]=8;for(Xt(Pn,t.lens,0,288,Xe,0,t.work,{bits:9}),r=0;r<32;)t.lens[r++]=5;Xt(Rn,t.lens,0,32,Ke,0,t.work,{bits:5}),un=!1}t.lencode=Xe,t.lenbits=9,t.distcode=Ke,t.distbits=5}function Zn(t,r,e,n){var a,i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=ft(i.wsize)),n>=i.wsize?(V(i.window,r,e-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),V(i.window,r,e-n,a,i.wnext),(n-=a)?(V(i.window,r,e-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0}function gs(t,r){var e,n,a,i,s,o,u,h,l,v,g,d,_,x,k,y,c,f,p,b,w,m,S,O,A=0,E=ft(4),ht=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return J;(e=t.state).mode===ct&&(e.mode=He),s=t.next_out,a=t.output,u=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,h=e.hold,l=e.bits,v=o,g=u,m=kt;t:for(;;)switch(e.mode){case Ln:if(e.wrap===0){e.mode=He;break}for(;l<16;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if(2&e.wrap&&h===35615){e.check=0,E[0]=255&h,E[1]=h>>>8&255,e.check=R(e.check,E,2,0),h=0,l=0,e.mode=Lr;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",e.mode=D;break}if((15&h)!==Ur){t.msg="unknown compression method",e.mode=D;break}if(l-=4,w=8+(15&(h>>>=4)),e.wbits===0)e.wbits=w;else if(w>e.wbits){t.msg="invalid window size",e.mode=D;break}e.dmax=1<<w,t.adler=e.check=1,e.mode=512&h?Kr:ct,h=0,l=0;break;case Lr:for(;l<16;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if(e.flags=h,(255&e.flags)!==Ur){t.msg="unknown compression method",e.mode=D;break}if(57344&e.flags){t.msg="unknown header flags set",e.mode=D;break}e.head&&(e.head.text=h>>8&1),512&e.flags&&(E[0]=255&h,E[1]=h>>>8&255,e.check=R(e.check,E,2,0)),h=0,l=0,e.mode=Mr;case Mr:for(;l<32;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}e.head&&(e.head.time=h),512&e.flags&&(E[0]=255&h,E[1]=h>>>8&255,E[2]=h>>>16&255,E[3]=h>>>24&255,e.check=R(e.check,E,4,0)),h=0,l=0,e.mode=Zr;case Zr:for(;l<16;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}e.head&&(e.head.xflags=255&h,e.head.os=h>>8),512&e.flags&&(E[0]=255&h,E[1]=h>>>8&255,e.check=R(e.check,E,2,0)),h=0,l=0,e.mode=jr;case jr:if(1024&e.flags){for(;l<16;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}e.length=h,e.head&&(e.head.extra_len=h),512&e.flags&&(E[0]=255&h,E[1]=h>>>8&255,e.check=R(e.check,E,2,0)),h=0,l=0}else e.head&&(e.head.extra=null);e.mode=Hr;case Hr:if(1024&e.flags&&((d=e.length)>o&&(d=o),d&&(e.head&&(w=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),V(e.head.extra,n,i,d,w)),512&e.flags&&(e.check=R(e.check,n,d,i)),o-=d,i+=d,e.length-=d),e.length))break t;e.length=0,e.mode=Wr;case Wr:if(2048&e.flags){if(o===0)break t;d=0;do w=n[i+d++],e.head&&w&&e.length<65536&&(e.head.name+=String.fromCharCode(w));while(w&&d<o);if(512&e.flags&&(e.check=R(e.check,n,d,i)),o-=d,i+=d,w)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=Qr;case Qr:if(4096&e.flags){if(o===0)break t;d=0;do w=n[i+d++],e.head&&w&&e.length<65536&&(e.head.comment+=String.fromCharCode(w));while(w&&d<o);if(512&e.flags&&(e.check=R(e.check,n,d,i)),o-=d,i+=d,w)break t}else e.head&&(e.head.comment=null);e.mode=Xr;case Xr:if(512&e.flags){for(;l<16;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if(h!==(65535&e.check)){t.msg="header crc mismatch",e.mode=D;break}h=0,l=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=ct;break;case Kr:for(;l<32;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}t.adler=e.check=hn(h),h=0,l=0,e.mode=Ie;case Ie:if(e.havedict===0)return t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=o,e.hold=h,e.bits=l,os;t.adler=e.check=1,e.mode=ct;case ct:if(r===as||r===me)break t;case He:if(e.last){h>>>=7&l,l-=7&l,e.mode=Qe;break}for(;l<3;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}switch(e.last=1&h,l-=1,3&(h>>>=1)){case 0:e.mode=Yr;break;case 1:if(ms(e),e.mode=ge,r===me){h>>>=2,l-=2;break t}break;case 2:e.mode=Vr;break;case 3:t.msg="invalid block type",e.mode=D}h>>>=2,l-=2;break;case Yr:for(h>>>=7&l,l-=7&l;l<32;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",e.mode=D;break}if(e.length=65535&h,h=0,l=0,e.mode=We,r===me)break t;case We:e.mode=Gr;case Gr:if(d=e.length){if(d>o&&(d=o),d>u&&(d=u),d===0)break t;V(a,n,i,d,s),o-=d,i+=d,u-=d,s+=d,e.length-=d;break}e.mode=ct;break;case Vr:for(;l<14;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if(e.nlen=257+(31&h),h>>>=5,l-=5,e.ndist=1+(31&h),h>>>=5,l-=5,e.ncode=4+(15&h),h>>>=4,l-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=D;break}e.have=0,e.mode=Jr;case Jr:for(;e.have<e.ncode;){for(;l<3;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}e.lens[ht[e.have++]]=7&h,h>>>=3,l-=3}for(;e.have<19;)e.lens[ht[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,S={bits:e.lenbits},m=Xt(is,e.lens,0,19,e.lencode,0,e.work,S),e.lenbits=S.bits,m){t.msg="invalid code lengths set",e.mode=D;break}e.have=0,e.mode=qr;case qr:for(;e.have<e.nlen+e.ndist;){for(;y=(A=e.lencode[h&(1<<e.lenbits)-1])>>>16&255,c=65535&A,!((k=A>>>24)<=l);){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if(c<16)h>>>=k,l-=k,e.lens[e.have++]=c;else{if(c===16){for(O=k+2;l<O;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if(h>>>=k,l-=k,e.have===0){t.msg="invalid bit length repeat",e.mode=D;break}w=e.lens[e.have-1],d=3+(3&h),h>>>=2,l-=2}else if(c===17){for(O=k+3;l<O;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}l-=k,w=0,d=3+(7&(h>>>=k)),h>>>=3,l-=3}else{for(O=k+7;l<O;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}l-=k,w=0,d=11+(127&(h>>>=k)),h>>>=7,l-=7}if(e.have+d>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=D;break}for(;d--;)e.lens[e.have++]=w}}if(e.mode===D)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=D;break}if(e.lenbits=9,S={bits:e.lenbits},m=Xt(Pn,e.lens,0,e.nlen,e.lencode,0,e.work,S),e.lenbits=S.bits,m){t.msg="invalid literal/lengths set",e.mode=D;break}if(e.distbits=6,e.distcode=e.distdyn,S={bits:e.distbits},m=Xt(Rn,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,S),e.distbits=S.bits,m){t.msg="invalid distances set",e.mode=D;break}if(e.mode=ge,r===me)break t;case ge:e.mode=ye;case ye:if(o>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=o,e.hold=h,e.bits=l,qa(t,g),s=t.next_out,a=t.output,u=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,h=e.hold,l=e.bits,e.mode===ct&&(e.back=-1);break}for(e.back=0;y=(A=e.lencode[h&(1<<e.lenbits)-1])>>>16&255,c=65535&A,!((k=A>>>24)<=l);){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if(y&&!(240&y)){for(f=k,p=y,b=c;y=(A=e.lencode[b+((h&(1<<f+p)-1)>>f)])>>>16&255,c=65535&A,!(f+(k=A>>>24)<=l);){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}h>>>=f,l-=f,e.back+=f}if(h>>>=k,l-=k,e.back+=k,e.length=c,y===0){e.mode=an;break}if(32&y){e.back=-1,e.mode=ct;break}if(64&y){t.msg="invalid literal/length code",e.mode=D;break}e.extra=15&y,e.mode=tn;case tn:if(e.extra){for(O=e.extra;l<O;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}e.length+=h&(1<<e.extra)-1,h>>>=e.extra,l-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=en;case en:for(;y=(A=e.distcode[h&(1<<e.distbits)-1])>>>16&255,c=65535&A,!((k=A>>>24)<=l);){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if(!(240&y)){for(f=k,p=y,b=c;y=(A=e.distcode[b+((h&(1<<f+p)-1)>>f)])>>>16&255,c=65535&A,!(f+(k=A>>>24)<=l);){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}h>>>=f,l-=f,e.back+=f}if(h>>>=k,l-=k,e.back+=k,64&y){t.msg="invalid distance code",e.mode=D;break}e.offset=c,e.extra=15&y,e.mode=rn;case rn:if(e.extra){for(O=e.extra;l<O;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}e.offset+=h&(1<<e.extra)-1,h>>>=e.extra,l-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=D;break}e.mode=nn;case nn:if(u===0)break t;if(d=g-u,e.offset>d){if((d=e.offset-d)>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=D;break}d>e.wnext?(d-=e.wnext,_=e.wsize-d):_=e.wnext-d,d>e.length&&(d=e.length),x=e.window}else x=a,_=s-e.offset,d=e.length;d>u&&(d=u),u-=d,e.length-=d;do a[s++]=x[_++];while(--d);e.length===0&&(e.mode=ye);break;case an:if(u===0)break t;a[s++]=e.length,u--,e.mode=ye;break;case Qe:if(e.wrap){for(;l<32;){if(o===0)break t;o--,h|=n[i++]<<l,l+=8}if(g-=u,t.total_out+=g,e.total+=g,g&&(t.adler=e.check=e.flags?R(e.check,a,g,s-g):qt(e.check,a,g,s-g)),g=u,(e.flags?h:hn(h))!==e.check){t.msg="incorrect data check",e.mode=D;break}h=0,l=0}e.mode=sn;case sn:if(e.wrap&&e.flags){for(;l<32;){if(o===0)break t;o--,h+=n[i++]<<l,l+=8}if(h!==(4294967295&e.total)){t.msg="incorrect length check",e.mode=D;break}h=0,l=0}e.mode=on;case on:m=ss;break t;case D:m=Nn;break t;case Mn:return Un;default:return J}return t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=o,e.hold=h,e.bits=l,(e.wsize||g!==t.avail_out&&e.mode<D&&(e.mode<Qe||r!==Nr))&&Zn(t,t.output,t.next_out,g-t.avail_out),v-=t.avail_in,g-=t.avail_out,t.total_in+=v,t.total_out+=g,e.total+=g,e.wrap&&g&&(t.adler=e.check=e.flags?R(e.check,a,g,t.next_out-g):qt(e.check,a,g,t.next_out-g)),t.data_type=e.bits+(e.last?64:0)+(e.mode===ct?128:0)+(e.mode===ge||e.mode===We?256:0),(v===0&&g===0||r===Nr)&&m===kt&&(m=hs),m}function ys(t){if(!t||!t.state)return J;var r=t.state;return r.window&&(r.window=null),t.state=null,kt}function vs(t,r){var e;return t&&t.state&&2&(e=t.state).wrap?(e.head=r,r.done=!1,kt):J}function jn(t,r){var e,n=r.length;return t&&t.state?(e=t.state).wrap!==0&&e.mode!==Ie?J:e.mode===Ie&&qt(1,r,n,0)!==e.check?Nn:Zn(t,r,n,n)?(e.mode=Mn,Un):(e.havedict=1,kt):J}var te={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function Hn(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function ws(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ir=Object.prototype.toString,Ae=function t(r){if(!(this instanceof t))return new t(r);this.options=$n({chunkSize:16384,windowBits:0,to:""},r||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||r&&r.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Hn,this.strm.avail_out=0;var n=_s(this.strm,e.windowBits);if(n!==F)throw new Error(te[n]);if(this.header=new ws,vs(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Be(e.dictionary):ir.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=jn(this.strm,e.dictionary))!==F))throw new Error(te[n])};function Tt(t){for(var r=t.length;--r>=0;)t[r]=0}Ae.prototype.push=function(t,r){var e,n,a,i,s,o,u=this.strm,h=this.options.chunkSize,l=this.options.dictionary,v=!1;if(this.ended)return!1;n=r===~~r?r:r===!0?Z:ot,typeof t=="string"?u.input=Ka(t):ir.call(t)==="[object ArrayBuffer]"?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(u.avail_out===0&&(u.output=ft(h),u.next_out=0,u.avail_out=h),(e=gs(u,ot))===Ma&&l&&(o=typeof l=="string"?Be(l):ir.call(l)==="[object ArrayBuffer]"?new Uint8Array(l):l,e=jn(this.strm,o)),e===be&&v===!0&&(e=F,v=!1),e!==mt&&e!==F)return this.onEnd(e),this.ended=!0,!1;u.next_out&&(u.avail_out!==0&&e!==mt&&(u.avail_in!==0||n!==Z&&n!==$e)||(this.options.to==="string"?(a=Ga(u.output,u.next_out),i=u.next_out-a,s=Ya(u.output,a),u.next_out=i,u.avail_out=h-i,i&&V(u.output,u.output,a,i,0),this.onData(s)):this.onData(De(u.output,u.next_out)))),u.avail_in===0&&u.avail_out===0&&(v=!0)}while((u.avail_in>0||u.avail_out===0)&&e!==mt);return e===mt&&(n=Z),n===Z?(e=ys(this.strm),this.onEnd(e),this.ended=!0,e===F):n!==$e||(this.onEnd(F),u.avail_out=0,!0)},Ae.prototype.onData=function(t){this.chunks.push(t)},Ae.prototype.onEnd=function(t){t===F&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=gr(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var dt,jt,Kt,Yt,ar,ke,Wn,Qn,Xn,bs=0,Kn=1,As=2,ks=3,xs=258,sr=29,ae=256,Gt=ae+1+sr,Dt=30,vr=19,Yn=2*Gt+1,bt=15,Ye=16,Es=7,wr=256,Gn=16,Vn=17,Jn=18,or=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],xe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ss=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],qn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Cs=512;function Ge(t,r,e,n,a){this.static_tree=t,this.extra_bits=r,this.extra_base=e,this.elems=n,this.max_length=a,this.has_stree=t&&t.length}function Ve(t,r){this.dyn_tree=t,this.max_code=0,this.stat_desc=r}function ti(t){return t<256?Kt[t]:Kt[256+(t>>>7)]}function ee(t,r){t.pending_buf[t.pending++]=255&r,t.pending_buf[t.pending++]=r>>>8&255}function W(t,r,e){t.bi_valid>Ye-e?(t.bi_buf|=r<<t.bi_valid&65535,ee(t,t.bi_buf),t.bi_buf=r>>Ye-t.bi_valid,t.bi_valid+=e-Ye):(t.bi_buf|=r<<t.bi_valid&65535,t.bi_valid+=e)}function at(t,r,e){W(t,e[2*r],e[2*r+1])}function ei(t,r){var e=0;do e|=1&t,t>>>=1,e<<=1;while(--r>0);return e>>>1}function Os(t){t.bi_valid===16?(ee(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function zs(t,r){var e,n,a,i,s,o,u=r.dyn_tree,h=r.max_code,l=r.stat_desc.static_tree,v=r.stat_desc.has_stree,g=r.stat_desc.extra_bits,d=r.stat_desc.extra_base,_=r.stat_desc.max_length,x=0;for(i=0;i<=bt;i++)t.bl_count[i]=0;for(u[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;e<Yn;e++)(i=u[2*u[2*(n=t.heap[e])+1]+1]+1)>_&&(i=_,x++),u[2*n+1]=i,n>h||(t.bl_count[i]++,s=0,n>=d&&(s=g[n-d]),o=u[2*n],t.opt_len+=o*(i+s),v&&(t.static_len+=o*(l[2*n+1]+s)));if(x!==0){do{for(i=_-1;t.bl_count[i]===0;)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[_]--,x-=2}while(x>0);for(i=_;i!==0;i--)for(n=t.bl_count[i];n!==0;)(a=t.heap[--e])>h||(u[2*a+1]!==i&&(t.opt_len+=(i-u[2*a+1])*u[2*a],u[2*a+1]=i),n--)}}function ri(t,r,e){var n,a,i=new Array(bt+1),s=0;for(n=1;n<=bt;n++)i[n]=s=s+e[n-1]<<1;for(a=0;a<=r;a++){var o=t[2*a+1];o!==0&&(t[2*a]=ei(i[o]++,o))}}function Ts(){var t,r,e,n,a,i=new Array(bt+1);for(Tt(dt=new Array(2*(Gt+2))),Tt(jt=new Array(2*Dt)),Tt(Kt=new Array(Cs)),Tt(Yt=new Array(xs-ks+1)),Tt(ar=new Array(sr)),Tt(ke=new Array(Dt)),e=0,n=0;n<sr-1;n++)for(ar[n]=e,t=0;t<1<<or[n];t++)Yt[e++]=n;for(Yt[e-1]=n,a=0,n=0;n<16;n++)for(ke[n]=a,t=0;t<1<<xe[n];t++)Kt[a++]=n;for(a>>=7;n<Dt;n++)for(ke[n]=a<<7,t=0;t<1<<xe[n]-7;t++)Kt[256+a++]=n;for(r=0;r<=bt;r++)i[r]=0;for(t=0;t<=143;)dt[2*t+1]=8,t++,i[8]++;for(;t<=255;)dt[2*t+1]=9,t++,i[9]++;for(;t<=279;)dt[2*t+1]=7,t++,i[7]++;for(;t<=287;)dt[2*t+1]=8,t++,i[8]++;for(ri(dt,Gt+1,i),t=0;t<Dt;t++)jt[2*t+1]=5,jt[2*t]=ei(t,5);Wn=new Ge(dt,or,ae+1,Gt,bt),Qn=new Ge(jt,xe,0,Dt,bt),Xn=new Ge(new Array(0),Ss,0,vr,Es)}function ni(t){var r;for(r=0;r<Gt;r++)t.dyn_ltree[2*r]=0;for(r=0;r<Dt;r++)t.dyn_dtree[2*r]=0;for(r=0;r<vr;r++)t.bl_tree[2*r]=0;t.dyn_ltree[2*wr]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function ii(t){t.bi_valid>8?ee(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function $s(t,r,e,n){ii(t),n&&(ee(t,e),ee(t,~e)),V(t.pending_buf,t.window,r,e,t.pending),t.pending+=e}function ln(t,r,e,n){var a=2*r,i=2*e;return t[a]<t[i]||t[a]===t[i]&&n[r]<=n[e]}function Je(t,r,e){for(var n=t.heap[e],a=e<<1;a<=t.heap_len&&(a<t.heap_len&&ln(r,t.heap[a+1],t.heap[a],t.depth)&&a++,!ln(r,n,t.heap[a],t.depth));)t.heap[e]=t.heap[a],e=a,a<<=1;t.heap[e]=n}function cn(t,r,e){var n,a,i,s,o=0;if(t.last_lit!==0)do n=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],a=t.pending_buf[t.l_buf+o],o++,n===0?at(t,a,r):(at(t,(i=Yt[a])+ae+1,r),(s=or[i])!==0&&W(t,a-=ar[i],s),at(t,i=ti(--n),e),(s=xe[i])!==0&&W(t,n-=ke[i],s));while(o<t.last_lit);at(t,wr,r)}function hr(t,r){var e,n,a,i=r.dyn_tree,s=r.stat_desc.static_tree,o=r.stat_desc.has_stree,u=r.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=Yn,e=0;e<u;e++)i[2*e]!==0?(t.heap[++t.heap_len]=h=e,t.depth[e]=0):i[2*e+1]=0;for(;t.heap_len<2;)i[2*(a=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[a]=0,t.opt_len--,o&&(t.static_len-=s[2*a+1]);for(r.max_code=h,e=t.heap_len>>1;e>=1;e--)Je(t,i,e);a=u;do e=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Je(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=e,t.heap[--t.heap_max]=n,i[2*a]=i[2*e]+i[2*n],t.depth[a]=(t.depth[e]>=t.depth[n]?t.depth[e]:t.depth[n])+1,i[2*e+1]=i[2*n+1]=a,t.heap[1]=a++,Je(t,i,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],zs(t,r),ri(i,h,t.bl_count)}function dn(t,r,e){var n,a,i=-1,s=r[1],o=0,u=7,h=4;for(s===0&&(u=138,h=3),r[2*(e+1)+1]=65535,n=0;n<=e;n++)a=s,s=r[2*(n+1)+1],++o<u&&a===s||(o<h?t.bl_tree[2*a]+=o:a!==0?(a!==i&&t.bl_tree[2*a]++,t.bl_tree[2*Gn]++):o<=10?t.bl_tree[2*Vn]++:t.bl_tree[2*Jn]++,o=0,i=a,s===0?(u=138,h=3):a===s?(u=6,h=3):(u=7,h=4))}function fn(t,r,e){var n,a,i=-1,s=r[1],o=0,u=7,h=4;for(s===0&&(u=138,h=3),n=0;n<=e;n++)if(a=s,s=r[2*(n+1)+1],!(++o<u&&a===s)){if(o<h)do at(t,a,t.bl_tree);while(--o!=0);else a!==0?(a!==i&&(at(t,a,t.bl_tree),o--),at(t,Gn,t.bl_tree),W(t,o-3,2)):o<=10?(at(t,Vn,t.bl_tree),W(t,o-3,3)):(at(t,Jn,t.bl_tree),W(t,o-11,7));o=0,i=a,s===0?(u=138,h=3):a===s?(u=6,h=3):(u=7,h=4)}}function Ds(t){var r;for(dn(t,t.dyn_ltree,t.l_desc.max_code),dn(t,t.dyn_dtree,t.d_desc.max_code),hr(t,t.bl_desc),r=vr-1;r>=3&&t.bl_tree[2*qn[r]+1]===0;r--);return t.opt_len+=3*(r+1)+5+5+4,r}function Is(t,r,e,n){var a;for(W(t,r-257,5),W(t,e-1,5),W(t,n-4,4),a=0;a<n;a++)W(t,t.bl_tree[2*qn[a]+1],3);fn(t,t.dyn_ltree,r-1),fn(t,t.dyn_dtree,e-1)}function Fs(t){var r,e=4093624447;for(r=0;r<=31;r++,e>>>=1)if(1&e&&t.dyn_ltree[2*r]!==0)return Dr;if(t.dyn_ltree[18]!==0||t.dyn_ltree[20]!==0||t.dyn_ltree[26]!==0)return Ir;for(r=32;r<ae;r++)if(t.dyn_ltree[2*r]!==0)return Ir;return Dr}var pn=!1;function Bs(t){pn||(Ts(),pn=!0),t.l_desc=new Ve(t.dyn_ltree,Wn),t.d_desc=new Ve(t.dyn_dtree,Qn),t.bl_desc=new Ve(t.bl_tree,Xn),t.bi_buf=0,t.bi_valid=0,ni(t)}function ai(t,r,e,n){W(t,(bs<<1)+(n?1:0),3),$s(t,r,e,!0)}function Ps(t){W(t,Kn<<1,3),at(t,wr,dt),Os(t)}function Rs(t,r,e,n){var a,i,s=0;t.level>0?(t.strm.data_type===Tn&&(t.strm.data_type=Fs(t)),hr(t,t.l_desc),hr(t,t.d_desc),s=Ds(t),a=t.opt_len+3+7>>>3,(i=t.static_len+3+7>>>3)<=a&&(a=i)):a=i=e+5,e+4<=a&&r!==-1?ai(t,r,e,n):t.strategy===zn||i===a?(W(t,(Kn<<1)+(n?1:0),3),cn(t,dt,jt)):(W(t,(As<<1)+(n?1:0),3),Is(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),cn(t,t.dyn_ltree,t.dyn_dtree)),ni(t),n&&ii(t)}function vt(t,r,e){return t.pending_buf[t.d_buf+2*t.last_lit]=r>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&r,t.pending_buf[t.l_buf+t.last_lit]=255&e,t.last_lit++,r===0?t.dyn_ltree[2*e]++:(t.matches++,r--,t.dyn_ltree[2*(Yt[e]+ae+1)]++,t.dyn_dtree[2*ti(r)]++),t.last_lit===t.lit_bufsize-1}var Ns=9,Us=29,Ls=256,ur=Ls+1+Us,Ms=30,Zs=19,js=2*ur+1,Hs=15,C=3,gt=258,et=gt+C+1,Ws=32,Pe=42,lr=69,Ee=73,Se=91,Ce=103,At=113,Ht=666,N=1,se=2,xt=3,Pt=4,Qs=3;function yt(t,r){return t.msg=te[r],r}function _n(t){return(t<<1)-(t>4?9:0)}function _t(t){for(var r=t.length;--r>=0;)t[r]=0}function pt(t){var r=t.state,e=r.pending;e>t.avail_out&&(e=t.avail_out),e!==0&&(V(t.output,r.pending_buf,r.pending_out,e,t.next_out),t.next_out+=e,r.pending_out+=e,t.total_out+=e,t.avail_out-=e,r.pending-=e,r.pending===0&&(r.pending_out=0))}function L(t,r){Rs(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,r),t.block_start=t.strstart,pt(t.strm)}function T(t,r){t.pending_buf[t.pending++]=r}function Ut(t,r){t.pending_buf[t.pending++]=r>>>8&255,t.pending_buf[t.pending++]=255&r}function Xs(t,r,e,n){var a=t.avail_in;return a>n&&(a=n),a===0?0:(t.avail_in-=a,V(r,t.input,t.next_in,a,e),t.state.wrap===1?t.adler=qt(t.adler,r,a,e):t.state.wrap===2&&(t.adler=R(t.adler,r,a,e)),t.next_in+=a,t.total_in+=a,a)}function si(t,r){var e,n,a=t.max_chain_length,i=t.strstart,s=t.prev_length,o=t.nice_match,u=t.strstart>t.w_size-et?t.strstart-(t.w_size-et):0,h=t.window,l=t.w_mask,v=t.prev,g=t.strstart+gt,d=h[i+s-1],_=h[i+s];t.prev_length>=t.good_match&&(a>>=2),o>t.lookahead&&(o=t.lookahead);do if(h[(e=r)+s]===_&&h[e+s-1]===d&&h[e]===h[i]&&h[++e]===h[i+1]){i+=2,e++;do;while(h[++i]===h[++e]&&h[++i]===h[++e]&&h[++i]===h[++e]&&h[++i]===h[++e]&&h[++i]===h[++e]&&h[++i]===h[++e]&&h[++i]===h[++e]&&h[++i]===h[++e]&&i<g);if(n=gt-(g-i),i=g-gt,n>s){if(t.match_start=r,s=n,n>=o)break;d=h[i+s-1],_=h[i+s]}}while((r=v[r&l])>u&&--a!=0);return s<=t.lookahead?s:t.lookahead}function Et(t){var r,e,n,a,i,s=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-et)){V(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,r=e=t.hash_size;do n=t.head[--r],t.head[r]=n>=s?n-s:0;while(--e);r=e=s;do n=t.prev[--r],t.prev[r]=n>=s?n-s:0;while(--e);a+=s}if(t.strm.avail_in===0)break;if(e=Xs(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=e,t.lookahead+t.insert>=C)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+C-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<C)););}while(t.lookahead<et&&t.strm.avail_in!==0)}function Ks(t,r){var e=65535;for(e>t.pending_buf_size-5&&(e=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Et(t),t.lookahead===0&&r===ot)return N;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+e;if((t.strstart===0||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,L(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-et&&(L(t,!1),t.strm.avail_out===0))return N}return t.insert=0,r===Z?(L(t,!0),t.strm.avail_out===0?xt:Pt):(t.strstart>t.block_start&&(L(t,!1),t.strm.avail_out),N)}function qe(t,r){for(var e,n;;){if(t.lookahead<et){if(Et(t),t.lookahead<et&&r===ot)return N;if(t.lookahead===0)break}if(e=0,t.lookahead>=C&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),e!==0&&t.strstart-e<=t.w_size-et&&(t.match_length=si(t,e)),t.match_length>=C)if(n=vt(t,t.strstart-t.match_start,t.match_length-C),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=C){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!=0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=vt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(L(t,!1),t.strm.avail_out===0))return N}return t.insert=t.strstart<C-1?t.strstart:C-1,r===Z?(L(t,!0),t.strm.avail_out===0?xt:Pt):t.last_lit&&(L(t,!1),t.strm.avail_out===0)?N:se}function $t(t,r){for(var e,n,a;;){if(t.lookahead<et){if(Et(t),t.lookahead<et&&r===ot)return N;if(t.lookahead===0)break}if(e=0,t.lookahead>=C&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=C-1,e!==0&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-et&&(t.match_length=si(t,e),t.match_length<=5&&(t.strategy===ja||t.match_length===C&&t.strstart-t.match_start>4096)&&(t.match_length=C-1)),t.prev_length>=C&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-C,n=vt(t,t.strstart-1-t.prev_match,t.prev_length-C),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=a&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!=0);if(t.match_available=0,t.match_length=C-1,t.strstart++,n&&(L(t,!1),t.strm.avail_out===0))return N}else if(t.match_available){if((n=vt(t,0,t.window[t.strstart-1]))&&L(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return N}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=vt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<C-1?t.strstart:C-1,r===Z?(L(t,!0),t.strm.avail_out===0?xt:Pt):t.last_lit&&(L(t,!1),t.strm.avail_out===0)?N:se}function Ys(t,r){for(var e,n,a,i,s=t.window;;){if(t.lookahead<=gt){if(Et(t),t.lookahead<=gt&&r===ot)return N;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=C&&t.strstart>0&&(n=s[a=t.strstart-1])===s[++a]&&n===s[++a]&&n===s[++a]){i=t.strstart+gt;do;while(n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&a<i);t.match_length=gt-(i-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=C?(e=vt(t,1,t.match_length-C),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(e=vt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),e&&(L(t,!1),t.strm.avail_out===0))return N}return t.insert=0,r===Z?(L(t,!0),t.strm.avail_out===0?xt:Pt):t.last_lit&&(L(t,!1),t.strm.avail_out===0)?N:se}function Gs(t,r){for(var e;;){if(t.lookahead===0&&(Et(t),t.lookahead===0)){if(r===ot)return N;break}if(t.match_length=0,e=vt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,e&&(L(t,!1),t.strm.avail_out===0))return N}return t.insert=0,r===Z?(L(t,!0),t.strm.avail_out===0?xt:Pt):t.last_lit&&(L(t,!1),t.strm.avail_out===0)?N:se}function nt(t,r,e,n,a){this.good_length=t,this.max_lazy=r,this.nice_length=e,this.max_chain=n,this.func=a}var br=function(){var t=[new nt(0,0,0,0,Ks),new nt(4,4,8,4,qe),new nt(4,5,16,8,qe),new nt(4,6,32,32,qe),new nt(4,4,16,16,$t),new nt(8,16,32,32,$t),new nt(8,16,128,128,$t),new nt(8,32,128,256,$t),new nt(32,128,258,1024,$t),new nt(32,258,258,4096,$t)];return br=function(){return t},t};function Vs(t){t.window_size=2*t.w_size,_t(t.head);var r=br();t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=C-1,t.match_available=0,t.ins_h=0}function Js(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Fe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=Q(2*js),this.dyn_dtree=Q(2*(2*Ms+1)),this.bl_tree=Q(2*(2*Zs+1)),_t(this.dyn_ltree),_t(this.dyn_dtree),_t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=Q(Hs+1),this.heap=Q(2*ur+1),_t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=Q(2*ur+1),_t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function qs(t){var r;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Tn,(r=t.state).pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap?Pe:At,t.adler=r.wrap===2?0:1,r.last_flush=ot,Bs(r),F):yt(t,G)}function to(t){var r=qs(t);return r===F&&Vs(t.state),r}function eo(t,r){return t&&t.state?t.state.wrap!==2?G:(t.state.gzhead=r,F):G}function ro(t,r,e,n,a,i){if(!t)return G;var s=1;if(r===On&&(r=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>Ns||e!==Fe||n<8||n>15||r<0||r>9||i<0||i>zn)return yt(t,G);n===8&&(n=9);var o=new Js;return t.state=o,o.strm=t,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+C-1)/C),o.window=ft(2*o.w_size),o.head=Q(o.hash_size),o.prev=Q(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=ft(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=r,o.strategy=i,o.method=e,to(t)}function no(t,r){var e,n,a,i;if(!t||!t.state||r>$r||r<0)return t?yt(t,G):G;if(n=t.state,!t.output||!t.input&&t.avail_in!==0||n.status===Ht&&r!==Z)return yt(t,t.avail_out===0?be:G);if(n.strm=t,e=n.last_flush,n.last_flush=r,n.status===Pe)if(n.wrap===2)t.adler=0,T(n,31),T(n,139),T(n,8),n.gzhead?(T(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),T(n,255&n.gzhead.time),T(n,n.gzhead.time>>8&255),T(n,n.gzhead.time>>16&255),T(n,n.gzhead.time>>24&255),T(n,n.level===9?2:n.strategy>=pe||n.level<2?4:0),T(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(T(n,255&n.gzhead.extra.length),T(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=R(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=lr):(T(n,0),T(n,0),T(n,0),T(n,0),T(n,0),T(n,n.level===9?2:n.strategy>=pe||n.level<2?4:0),T(n,Qs),n.status=At);else{var s=Fe+(n.w_bits-8<<4)<<8;s|=(n.strategy>=pe||n.level<2?0:n.level<6?1:n.level===6?2:3)<<6,n.strstart!==0&&(s|=Ws),s+=31-s%31,n.status=At,Ut(n,s),n.strstart!==0&&(Ut(n,t.adler>>>16),Ut(n,65535&t.adler)),t.adler=1}if(n.status===lr)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(t.adler=R(t.adler,n.pending_buf,n.pending-a,a)),pt(t),a=n.pending,n.pending!==n.pending_buf_size));)T(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(t.adler=R(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=Ee)}else n.status=Ee;if(n.status===Ee)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=R(t.adler,n.pending_buf,n.pending-a,a)),pt(t),a=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,T(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>a&&(t.adler=R(t.adler,n.pending_buf,n.pending-a,a)),i===0&&(n.gzindex=0,n.status=Se)}else n.status=Se;if(n.status===Se)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=R(t.adler,n.pending_buf,n.pending-a,a)),pt(t),a=n.pending,n.pending===n.pending_buf_size)){i=1;break}i=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,T(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>a&&(t.adler=R(t.adler,n.pending_buf,n.pending-a,a)),i===0&&(n.status=Ce)}else n.status=Ce;if(n.status===Ce&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&pt(t),n.pending+2<=n.pending_buf_size&&(T(n,255&t.adler),T(n,t.adler>>8&255),t.adler=0,n.status=At)):n.status=At),n.pending!==0){if(pt(t),t.avail_out===0)return n.last_flush=-1,F}else if(t.avail_in===0&&_n(r)<=_n(e)&&r!==Z)return yt(t,be);if(n.status===Ht&&t.avail_in!==0)return yt(t,be);if(t.avail_in!==0||n.lookahead!==0||r!==ot&&n.status!==Ht){var o=n.strategy===pe?Gs(n,r):n.strategy===Ha?Ys(n,r):br()[n.level].func(n,r);if(o!==xt&&o!==Pt||(n.status=Ht),o===N||o===xt)return t.avail_out===0&&(n.last_flush=-1),F;if(o===se&&(r===Ua?Ps(n):r!==$r&&(ai(n,0,0,!1),r===La&&(_t(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),pt(t),t.avail_out===0))return n.last_flush=-1,F}return r!==Z?F:n.wrap<=0?mt:(n.wrap===2?(T(n,255&t.adler),T(n,t.adler>>8&255),T(n,t.adler>>16&255),T(n,t.adler>>24&255),T(n,255&t.total_in),T(n,t.total_in>>8&255),T(n,t.total_in>>16&255),T(n,t.total_in>>24&255)):(Ut(n,t.adler>>>16),Ut(n,65535&t.adler)),pt(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?F:mt)}function io(t){var r;return t&&t.state?(r=t.state.status)!==Pe&&r!==lr&&r!==Ee&&r!==Se&&r!==Ce&&r!==At&&r!==Ht?yt(t,G):(t.state=null,r===At?yt(t,Za):F):G}function ao(t,r){var e,n,a,i,s,o,u,h,l=r.length;if(!t||!t.state||(i=(e=t.state).wrap)===2||i===1&&e.status!==Pe||e.lookahead)return G;for(i===1&&(t.adler=qt(t.adler,r,l,0)),e.wrap=0,l>=e.w_size&&(i===0&&(_t(e.head),e.strstart=0,e.block_start=0,e.insert=0),h=ft(e.w_size),V(h,r,l-e.w_size,e.w_size,0),r=h,l=e.w_size),s=t.avail_in,o=t.next_in,u=t.input,t.avail_in=l,t.next_in=0,t.input=r,Et(e);e.lookahead>=C;){n=e.strstart,a=e.lookahead-(C-1);do e.ins_h=(e.ins_h<<e.hash_shift^e.window[n+C-1])&e.hash_mask,e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++;while(--a);e.strstart=n,e.lookahead=C-1,Et(e)}return e.strstart+=e.lookahead,e.block_start=e.strstart,e.insert=e.lookahead,e.lookahead=0,e.match_length=e.prev_length=C-1,e.match_available=0,t.next_in=o,t.input=u,t.avail_in=s,e.wrap=i,F}var oi=Object.prototype.toString,Oe=function(t){this.options=$n({level:On,method:Fe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wa,to:""},t||{});var r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Hn,this.strm.avail_out=0;var e=ro(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(e!==F)throw new Error(te[e]);if(r.header&&eo(this.strm,r.header),r.dictionary){var n;if(n=typeof r.dictionary=="string"?Be(r.dictionary):oi.call(r.dictionary)==="[object ArrayBuffer]"?new Uint8Array(r.dictionary):r.dictionary,(e=ao(this.strm,n))!==F)throw new Error(te[e]);this._dict_set=!0}};Oe.prototype.push=function(t,r){var e,n,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;n=r===~~r?r:r===!0?Z:ot,typeof t=="string"?a.input=Be(t):oi.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(a.avail_out===0&&(a.output=ft(i),a.next_out=0,a.avail_out=i),(e=no(a,n))!==mt&&e!==F)return this.onEnd(e),this.ended=!0,!1;a.avail_out!==0&&(a.avail_in!==0||n!==Z&&n!==$e)||(this.options.to==="string"?this.onData(Xa(De(a.output,a.next_out))):this.onData(De(a.output,a.next_out)))}while((a.avail_in>0||a.avail_out===0)&&e!==mt);return n===Z?(e=io(this.strm),this.onEnd(e),this.ended=!0,e===F):n!==$e||(this.onEnd(F),a.avail_out=0,!0)},Oe.prototype.onData=function(t){this.chunks.push(t)},Oe.prototype.onEnd=function(t){t===F&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=gr(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var hi=function(){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u"?"uint8array":"array";hi=function(){return t}},mn=function(t){function r(e,n){t.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=n,this.meta={}}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.processChunk=function(e){this.meta=e.meta,this._pako===null&&this._createPako(),this._pako.push(P(hi(),e.data),!1)},r.prototype.flush=function(){t.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},r.prototype.cleanUp=function(){t.prototype.cleanUp.call(this),this._pako=null},r.prototype._createPako=function(){var e=this,n={raw:!0,level:this._pakoOptions.level||-1};this._pako=this._pakoAction==="Deflate"?new Oe(n):new Ae(n),this._pako.onData=function(a){e.push({data:a,meta:e.meta})}},r}(j),so={magic:"\b\0",compressWorker:function(t){return new mn("Deflate",t)},uncompressWorker:function(){return new mn("Inflate",{})}},oo={magic:"\0\0",compressWorker:function(){return new j("STORE compression")},uncompressWorker:function(){return new j("STORE decompression")}},Wt={STORE:oo,DEFLATE:so},cr="PK",dr="PK",fr="PK",gn="PK\x07",tr="PK",ho="PK\x07\b",$=function(t,r){var e,n="";for(e=0;e<r;e++)n+=String.fromCharCode(255&t),t>>>=8;return n},uo=function(t,r){var e=t;return t||(e=r?16893:33204),(65535&e)<<16},lo=function(t,r){return 63&(t||0)},yn=function(t,r,e,n,a,i){var s,o,u=t.file,h=t.compression,l=i!==Qt,v=P("string",i(u.name)),g=P("string",Qt(u.name)),d=u.comment,_=P("string",i(d)),x=P("string",Qt(d)),k=g.length!==u.name.length,y=x.length!==d.length,c="",f="",p="",b=u.dir,w=u.date,m={crc32:0,compressedSize:0,uncompressedSize:0};r&&!e||(m.crc32=t.crc32,m.compressedSize=t.compressedSize,m.uncompressedSize=t.uncompressedSize);var S=0;r&&(S|=8),l||!k&&!y||(S|=2048);var O=0,A=0;b&&(O|=16),a==="UNIX"?(A=798,O|=uo(u.unixPermissions,b)):(A=20,O|=lo(u.dosPermissions)),s=w.getUTCHours(),s<<=6,s|=w.getUTCMinutes(),s<<=5,s|=w.getUTCSeconds()/2,o=w.getUTCFullYear()-1980,o<<=4,o|=w.getUTCMonth()+1,o<<=5,o|=w.getUTCDate(),k&&(f=$(1,1)+$(Vt(v),4)+g,c+="up"+$(f.length,2)+f),y&&(p=$(1,1)+$(Vt(_),4)+x,c+="uc"+$(p.length,2)+p);var E="";return E+=`
\0`,E+=$(S,2),E+=h.magic,E+=$(s,2),E+=$(o,2),E+=$(m.crc32,4),E+=$(m.compressedSize,4),E+=$(m.uncompressedSize,4),E+=$(v.length,2),E+=$(c.length,2),{fileRecord:cr+E+v+c,dirRecord:dr+$(A,2)+E+$(_.length,2)+"\0\0\0\0"+$(O,4)+$(n,4)+v+c+_}},co=function(t,r,e,n,a){var i=P("string",a(n));return fr+"\0\0\0\0"+$(t,2)+$(t,2)+$(r,4)+$(e,4)+$(i.length,2)+i},fo=function(t){return ho+$(t.crc32,4)+$(t.compressedSize,4)+$(t.uncompressedSize,4)},po=function(t){function r(e,n,a,i){t.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=n,this.zipPlatform=a,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.push=function(e){var n=e.meta.percent||0,a=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,t.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:a?(n+100*(a-i-1))/a:100}}))},r.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var n=this.streamFiles&&!e.file.dir;if(n){var a=yn(e,n,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(e){this.accumulate=!1;var n=this.streamFiles&&!e.file.dir,a=yn(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),n)this.push({data:fo(e),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var e=this.bytesWritten,n=0;n<this.dirRecords.length;n++)this.push({data:this.dirRecords[n],meta:{percent:100}});var a=this.bytesWritten-e,i=co(this.dirRecords.length,a,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(e){this._sources.push(e);var n=this;return e.on("data",function(a){n.processChunk(a)}),e.on("end",function(){n.closedSource(n.previous.streamInfo),n._sources.length?n.prepareNextSource():n.end()}),e.on("error",function(a){n.error(a)}),this},r.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},r.prototype.error=function(e){var n=this._sources;if(!t.prototype.error.call(this,e))return!1;for(var a=0;a<n.length;a++)try{n[a].error(e)}catch{}return!0},r.prototype.lock=function(){t.prototype.lock.call(this);for(var e=this._sources,n=0;n<e.length;n++)e[n].lock()},r}(j),_o=po,mo=function(t,r){var e=t||r,n=Wt[e];if(!n)throw new Error(e+" is not a valid compression method !");return n},go=function(t,r,e){var n=new _o(r.streamFiles,e,r.platform,r.encodeFileName),a=0;try{t.forEach(function(i,s){a++;var o=mo(s.options.compression,r.compression),u=s.options.compressionOptions||r.compressionOptions||{},h=s.dir,l=s.date;s._compressWorker(o,u).withStreamInfo("file",{name:i,dir:h,date:l,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(n)}),n.entriesCount=a}catch(i){n.error(i)}return n},Y=function(t){this.data=t,this.length=t.length,this.index=0,this.zero=0};Y.prototype.checkOffset=function(t){this.checkIndex(this.index+t)},Y.prototype.checkIndex=function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},Y.prototype.setIndex=function(t){this.checkIndex(t),this.index=t},Y.prototype.skip=function(t){this.setIndex(this.index+t)},Y.prototype.byteAt=function(t){},Y.prototype.readInt=function(t){var r,e=0;for(this.checkOffset(t),r=this.index+t-1;r>=this.index;r--)e=(e<<8)+this.byteAt(r);return this.index+=t,e},Y.prototype.readString=function(t){return P("string",this.readData(t))},Y.prototype.readData=function(t){},Y.prototype.lastIndexOfSignature=function(t){},Y.prototype.readAndCheckSignature=function(t){},Y.prototype.readDate=function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))};var ui=Y,yo=function(t){function r(e){t.call(this,e);for(var n=0;n<this.data.length;n++)e[n]=255&e[n]}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var n=e.charCodeAt(0),a=e.charCodeAt(1),i=e.charCodeAt(2),s=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===n&&this.data[o+1]===a&&this.data[o+2]===i&&this.data[o+3]===s)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=e.charCodeAt(2),s=e.charCodeAt(3),o=this.readData(4);return n===o[0]&&a===o[1]&&i===o[2]&&s===o[3]},r.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},r}(ui),li=yo,vo=function(t){function r(e){t.call(this,e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},r}(ui),wo=vo,bo=function(t){function r(e){t.call(this,e)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var n=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},r}(li),Ao=bo;function ze(t){var r=St(t);return re(r),r!=="string"||M.uint8array?M.uint8array?new Ao(P("uint8array",t)):new li(P("array",t)):new wo(t)}var ko=0,xo=3,Eo=function(t){for(var r in Wt)if(Wt.hasOwnProperty(r)&&Wt[r].magic===t)return Wt[r];return null},q=function(t,r){this.options=t,this.loadOptions=r};q.prototype.isEncrypted=function(){return(1&this.bitFlag)==1},q.prototype.useUTF8=function(){return(2048&this.bitFlag)==2048},q.prototype.readLocalPart=function(t){var r,e;if(t.skip(22),this.fileNameLength=t.readInt(2),e=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(e),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((r=Eo(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+rr(this.compressionMethod)+" unknown (inner file : "+P("string",this.fileName)+")");this.decompressed=new Ft(this.compressedSize,this.uncompressedSize,this.crc32,r,t.readData(this.compressedSize))},q.prototype.readCentralPart=function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var r=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(r),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},q.prototype.processAttributes=function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),t===ko&&(this.dosPermissions=63&this.externalFileAttributes),t===xo&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},q.prototype.parseZIP64ExtraField=function(t){if(this.extraFields[1]){var r=ze(this.extraFields[1].value);this.uncompressedSize===It&&(this.uncompressedSize=r.readInt(8)),this.compressedSize===It&&(this.compressedSize=r.readInt(8)),this.localHeaderOffset===It&&(this.localHeaderOffset=r.readInt(8)),this.diskNumberStart===It&&(this.diskNumberStart=r.readInt(4))}},q.prototype.readExtraFields=function(t){var r,e,n,a=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<a;)r=t.readInt(2),e=t.readInt(2),n=t.readData(e),this.extraFields[r]={id:r,length:e,value:n}},q.prototype.handleUTF8=function(){var t=M.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=wt(this.fileName),this.fileCommentStr=wt(this.fileComment);else{var r=this.findExtraFieldUnicodePath();if(r!==null)this.fileNameStr=r;else{var e=P(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(e)}var n=this.findExtraFieldUnicodeComment();if(n!==null)this.fileCommentStr=n;else{var a=P(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},q.prototype.findExtraFieldUnicodePath=function(){var t=this.extraFields[28789];if(t){var r=ze(t.value);return r.readInt(1)!==1||Vt(this.fileName)!==r.readInt(4)?null:wt(r.readData(t.length-5))}return null},q.prototype.findExtraFieldUnicodeComment=function(){var t=this.extraFields[25461];if(t){var r=ze(t.value);return r.readInt(1)!==1||Vt(this.fileComment)!==r.readInt(4)?null:wt(r.readData(t.length-5))}return null};var So=q,tt=function(t){this.files=[],this.loadOptions=t};tt.prototype.checkSignature=function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var r=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+rr(r)+", expected "+rr(t)+")")}},tt.prototype.isSignature=function(t,r){var e=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===r;return this.reader.setIndex(e),n},tt.prototype.readBlockEndOfCentral=function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),r=M.uint8array?"uint8array":"array",e=P(r,t);this.zipComment=this.loadOptions.decodeFileName(e)},tt.prototype.readBlockZip64EndOfCentral=function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,r,e,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),r=this.reader.readInt(4),e=this.reader.readData(r),this.zip64ExtensibleData[t]={id:t,length:r,value:e}},tt.prototype.readBlockZip64EndOfCentralLocator=function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},tt.prototype.readLocalFiles=function(){var t,r;for(t=0;t<this.files.length;t++)r=this.files[t],this.reader.setIndex(r.localHeaderOffset),this.checkSignature(cr),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},tt.prototype.readCentralDir=function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(dr);)(t=new So({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},tt.prototype.readEndOfCentral=function(){var t=this.reader.lastIndexOfSignature(fr);if(t<0)throw this.isSignature(0,cr)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var r=t;if(this.checkSignature(fr),this.readBlockEndOfCentral(),this.diskNumber===fe||this.diskWithCentralDirStart===fe||this.centralDirRecordsOnThisDisk===fe||this.centralDirRecords===fe||this.centralDirSize===It||this.centralDirOffset===It){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(gn))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(gn),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,tr)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(tr),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(tr),this.readBlockZip64EndOfCentral()}var e=this.centralDirOffset+this.centralDirSize;this.zip64&&(e+=20,e+=12+this.zip64EndOfCentralSize);var n=r-e;if(n>0)this.isSignature(r,dr)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},tt.prototype.prepareReader=function(t){this.reader=ze(t)},tt.prototype.load=function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()};var Co=tt;function Oo(t){return new st.Promise(function(r,e){var n=t.decompressed.getContentWorker().pipe(new Cn);n.on("error",function(a){e(a)}).on("end",function(){n.streamInfo.crc32!==t.decompressed.crc32?e(new Error("Corrupted zip : CRC32 mismatch")):r()}).resume()})}function zo(t,r){var e=this;return r=pr(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:wt}),kn("the loaded zip file",t,!0,r.optimizedBinaryString,r.base64).then(function(n){var a=new Co(r);return a.load(n),a}).then(function(n){var a=[st.Promise.resolve(n)],i=n.files;if(r.checkCRC32)for(var s=0;s<i.length;s++)a.push(Oo(i[s]));return st.Promise.all(a)}).then(function(n){for(var a=n.shift(),i=a.files,s=0;s<i.length;s++){var o=i[s];e.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:r.createFolders})}return a.zipComment.length&&(e.comment=a.zipComment),e})}var ci=function(t,r,e){var n,a=St(r),i=pr(e||{},Sn);i.date=i.date||new Date,i.compression!==null&&(i.compression=i.compression.toUpperCase()),typeof i.unixPermissions=="string"&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(t=di(t)),i.createFolders&&(n=To(t))&&fi.call(this,n,!0);var s=a==="string"&&i.binary===!1&&i.base64===!1;e&&e.binary!==void 0||(i.binary=!s),(r instanceof Ft&&r.uncompressedSize===0||i.dir||!r||r.length===0)&&(i.base64=!1,i.binary=!0,r="",i.compression="STORE",a="string");var o=null;o=r instanceof Ft||r instanceof j?r:kn(t,r,i.binary,i.optimizedBinaryString,i.base64);var u=new Na(t,o,i);this.files[t]=u},To=function(t){t.slice(-1)==="/"&&(t=t.substring(0,t.length-1));var r=t.lastIndexOf("/");return r>0?t.substring(0,r):""},di=function(t){return t.slice(-1)!=="/"&&(t+="/"),t},fi=function(t,r){return r=r!==void 0?r:En,t=di(t),this.files[t]||ci.call(this,t,null,{dir:!0,createFolders:r}),this.files[t]};function vn(t){return Object.prototype.toString.call(t)==="[object RegExp]"}var H=function t(){if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new t;for(var e in this)typeof this[e]!="function"&&(r[e]=this[e]);return r}},Lt={support:{configurable:!0},defaults:{configurable:!0},version:{configurable:!0},external:{configurable:!0}};H.prototype.load=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},H.prototype.forEach=function(t){var r,e,n;for(r in this.files)n=this.files[r],(e=r.slice(this.root.length,r.length))&&r.slice(0,this.root.length)===this.root&&t(e,n)},H.prototype.filter=function(t){var r=[];return this.forEach(function(e,n){t(e,n)&&r.push(n)}),r},H.prototype.file=function(t,r,e){if(arguments.length===1){if(vn(t)){var n=t;return this.filter(function(i,s){return!s.dir&&n.test(i)})}var a=this.files[this.root+t];return a&&!a.dir?a:null}return t=this.root+t,ci.call(this,t,r,e),this},H.prototype.folder=function(t){if(!t)return this;if(vn(t))return this.filter(function(a,i){return i.dir&&t.test(a)});var r=this.root+t,e=fi.call(this,r),n=this.clone();return n.root=e.name,n},H.prototype.remove=function(t){t=this.root+t;var r=this.files[t];if(r||(t.slice(-1)!=="/"&&(t+="/"),r=this.files[t]),r&&!r.dir)delete this.files[t];else for(var e=this.filter(function(a,i){return i.name.slice(0,t.length)===t}),n=0;n<e.length;n++)delete this.files[e[n].name];return this},H.prototype.generate=function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},H.prototype.generateInternalStream=function(t){var r,e={};try{if((e=pr(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Qt})).type=e.type.toLowerCase(),e.compression=e.compression.toUpperCase(),e.type==="binarystring"&&(e.type="string"),!e.type)throw new Error("No output type specified.");re(e.type),e.platform!=="darwin"&&e.platform!=="freebsd"&&e.platform!=="linux"&&e.platform!=="sunos"||(e.platform="UNIX"),e.platform==="win32"&&(e.platform="DOS");var n=e.comment||this.comment||"";r=go(this,e,n)}catch(a){(r=new j("error")).error(a)}return new xn(r,e.type||"string",e.mimeType)},H.prototype.generateAsync=function(t,r){return this.generateInternalStream(t).accumulate(r)},H.prototype.loadAsync=function(t,r){return zo.apply(this,[t,r])},H.loadAsync=function(t,r){return new H().loadAsync(t,r)},Lt.support.get=function(){return M},Lt.defaults.get=function(){return Sn},Lt.version.get=function(){return"3.2.2-esm"},Lt.external.get=function(){return st},Object.defineProperties(H,Lt);var pi=H;var gi="No title",_i="No title",xr="Anonymous",yi={epub:"application/epub+zip",ncx:"application/x-dtbncx+xml",xml:"application/xml",xhtml:"application/xhtml+xml",doc:"application/msword",json:"application/json",txt:"text/plain",html:"text/html",htm:"text/html",js:"text/javascript",csv:"text/csv",css:"text/css",bmp:"image/bmp",avif:"image/avif",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",tiff:"image/tiff",tif:"image/tiff",webp:"image/webp",svg:"image/svg+xml",wav:"audio/wav",weba:"audio/webm",mp3:"audio/mpeg",ogg:"audio/ogg",ttf:"font/ttf",avi:"video/x-msvideo",webm:"video/webm",mp4:"video/mp4"};function $o(t){return yi[t.split(".").pop()]}function mi(t){return new Date(t).toISOString().replace(/\.[0-9]+Z$/,"Z")}function B(t){return t.replace(/^EPUB\//,"")}function I(t){t||(t={});let r="",e=Object.entries(t);for(let[n,a]of e)a&&(r+=` ${n}="${a}"`);return r}function Re(t){return t.replace(/^data:([A-Za-z-+\/]+);base64,/,"")}function Ar(t){let r=/^data:([A-Za-z-+\/]+);base64,/.exec(t);return r?r[1]:null}function kr(t){if(!t)return null;for(let[r,e]of Object.entries(yi))if(e===t)return"."+r;return null}var z=class{constructor(){this.__version__="3.0",this.__data__={isTitleChanged:!1,isAuthorChanged:!1,id:K.id(),title:gi,category:null,authors:[xr],publisher:null,language:"en",textDirection:"auto",pageDirection:null,cover:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBaRXhpZgAATU0AKgAAAAgABQMBAAUAAAABAAAASgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAEAAQAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP38ooooAKKKKACiiigAooooAKKK8h8W/t2fDDwP8Um8I6jrmqJqEN3Fp93qEHh3UrnQtMu5SBHa3eqx27WFrOxZAIp50kzLENv7xNwB69RXiXxA/wCCiPwl+GnizxFoeoa9rd5q3g+6S18QW2j+FtW1htALwLOk14bO2lFtbmJwwuJSsPyuN+UcL6HpHxu8K+IfG2meHtP1q1vtU1rRT4isVtlaWG708Okf2hJlBiKlpEwN2SGyARzQB1VFfKf7U37YPh7SfGPwT17S/GF5Y+GF+JOoeG9bMP2m3W+nttP1KF7Jodoe5b7XEipGqv5kix+WHJXPYeKv2yfB3xT+AHjDWPC/jzVvAN14ZmtYNRu9Z8G39tqugNLNF5Zm0m+giuQsyttR2iCsHLqSFJAB75RXnOs/tXeCdE+MkPgN7zWrrxBJKkE7WHh7Ub7TdMmdA8cN5qEMD2dnK6shSO5mjd/Mj2g+Ym70agAr8/8ASv2BZtL+Kninwn4w+GPxs8d6H4o8V3uuW/iLSPjHfab4PNrd3b3Yjv8ASRrEDRvEzFHSDT7iOXajkku6p+gFFAHxL8K/iT48+G/7RX7TVr4S+E+pfEFdY8bWsFpdaZq+nWUenz/2Fpy7tQ+2TwutuMxkPardS48weTlVEmx4T+A3xB/Y68RfB3WNN8H6t8XI/DPgB/A2tQeHL3TrO8tbgy2863aLqFzaxPa5ikQhZRKuYyInBbZ9Q+DfhXoPw+8QeJtV0ew+x3/jC/XVNXl8+ST7XcrBFbh8MxCYihjXCBV+XOMkk9DQB8F+Fv2cvjR4W8F/DHWrz4dabqHiLwx8ZfEvjTVtGtddtWEemXf9reS9vPIyI8zJdQ7EbZ87gOYl3Oh+1l4c8aeO/g78ZPih4q8Jah8O7fXtI8PeGdH8NapeWV3qxFtq5la4uTZTT2ytJJdbY4455TtTLFGcxr96Vw/xD/Z18K/Fbx94f8R+ILfV9RvPDEizWFo2uX0elCZXDxzS6eswtJ5o3AaOWaF3jZQUZSAQAeF/FD4UeOtG/bFt9a+Gfhb4geFbrXNTsbrxP4gh1zS7nwT4isY/LSZLzT7i4N5DfC3jZEmsrSNmYQCS4eMMqfVlFFABRRRQAUUUUAFFFFABRRRQB//Z",style:"",tags:[],publishedAt:null,createdAt:new Date,modifiedAt:new Date,enableNCX:!1,renditionLayout:null,renditionOrientation:null,renditionSpread:null,renditionFlow:null,containerPath:"META-INF/container.xml",packagePath:`EPUB/${K.id()}.opf`,ncxPath:`EPUB/${K.id()}.ncx`,navPath:`EPUB/${K.id()}.xhtml`,navTitle:"Index",navId:"navigation",coverPath:`EPUB/${K.id()}.jpg`,coverId:"cover-image"},this.__files__=[{path:"mimetype",data:"application/epub+zip",encoding:"utf8",manifest:null,spine:null,toc:null,landmarks:null}],this.update()}get data(){return this.__data__}};z.prototype.getFile=function(t){return this.__files__.find(function(r){return r.path===t})};z.prototype.setFile=function({path:t,data:r,encoding:e,manifest:n,spine:a,toc:i,landmarks:s}){e=e||"utf8",n=n||null,a=a||null,i=i||[],s=s||[],n&&(n.mediaType=n.mediaType||$o(n.href));let o=this.getFile(t);o?(o.data=r,o.encoding=e,o.manifest=n,o.spine=a,o.toc=i,o.landmarks=s):this.__files__.push({path:t,data:r,encoding:e,manifest:n,spine:a,toc:i,landmarks:s})};z.prototype.update=function(){this.updateContainer(),this.updateCover(),this.updateNav(),this.updateNCX(),this.updatePackage()};z.prototype.updateContainer=function(){let t=`
<?xml version="1.0"?>
<container version="1.0" xmlns="urn:oasis:names:tc:opendocument:xmlns:container">
<rootfiles>
<rootfile full-path="${this.__data__.packagePath}" media-type="application/oebps-package+xml"/>
</rootfiles>
</container>
  `;this.setFile({path:this.__data__.containerPath,data:t.trim()})};z.prototype.updateCover=function(){this.setFile({path:this.__data__.coverPath,data:Re(this.__data__.cover),encoding:"base64",manifest:{id:this.__data__.coverId,href:B(this.__data__.coverPath),mediaType:"image/jpeg",properties:"cover-image"}})};z.prototype.updateNav=function(){function t(i){return i.reduce((s,o)=>s+r(o),`
`)}function r(i){return i.reduce((s,{id:o,title:u,href:h,toc:l})=>s+`<li><a href="${h}">${u}</a>${l&&l.length>0?r(l):""}</li>
`,"")}function e(i){return i.reduce((s,o)=>s+n(o),`
`)}function n(i){return i.reduce((s,{id:o,title:u,href:h,epubType:l})=>s+`<li><a epub:type="${l||""}" href="${h}">${u}</a></li>
`,"")}let a=`
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="${this.__data__.language}" lang="${this.__data__.language}" dir="${this.__data__.textDirection}" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<meta charset="utf-8"/>
<title>${this.__data__.navTitle}</title>${this.__data__.style}
</head>
<body>
<nav epub:type="toc" id="toc">			
<h1>${this.__data__.navTitle}</h1>
<ol>${t(this.__files__.filter(i=>i.toc).map(i=>i.toc))}</ol>
</nav>
<!--
<nav epub:type="landmarks" id="landmarks">
<h1>Landmarks</h1>
<ol>${e(this.__files__.filter(i=>i.landmarks).map(i=>i.landmarks))}</ol>
</nav>
-->
</body>
</html>
  `;this.setFile({path:this.__data__.navPath,data:a.trim(),manifest:{id:this.__data__.navId,href:B(this.__data__.navPath),mediaType:"application/xhtml+xml",properties:"nav"},spine:{id:this.__data__.navId,linear:!0},toc:[{href:B(this.__data__.navPath),title:this.__data__.navTitle}]})};z.prototype.updateNCX=function(){if(!this.__data__.enableNCX)return;function t(n){return n.reduce((a,i)=>a+r(i),`
`)}function r(n){return n.reduce((a,{id:i,title:s,href:o,toc:u})=>a+`
<navPoint id="${i||""}">
<navLabel>
<text>${s}</text>
</navLabel>
<content src="${o}"/>${u&&u.length>0?r(u):""}
</navPoint>
      `.trim()+`
`,"")}let e=`
<?xml version="1.0" encoding="utf-8"?>
<ncx xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns="http://www.daisy.org/z3986/2005/ncx/" version="2005-1" xml:lang="${this.__data__.language}">
<head>
<meta name="dtb:uid" content="${this.__data__.id}"/>
<meta name="dtb:depth" content="1"/>
<meta name="dtb:totalPageCount" content="0"/>
<meta name="dtb:maxPageNumber" content="0"/>
</head>
<docTitle><text>${this.__data__.title}</text></docTitle>
${this.__data__.authors.map(n=>"<docAuthor><text>"+n+"</text></docAuthor>").join(`
`)}
<navMap>${t(this.__files__.filter(n=>n.toc).map(n=>n.toc))}</navMap>
</ncx>
  `;this.setFile({path:this.__data__.ncxPath,data:e.trim(),manifest:{id:"ncx",href:B(this.__data__.ncxPath),mediaType:"application/x-dtbncx+xml"}})};z.prototype.updatePackage=function(){function t({id:l,title:v,category:g,authors:d,publisher:_,language:x,publishedAt:k,modifiedAt:y,cover:c,coverId:f,tags:p,renditionLayout:b,renditionOrientation:w,renditionSpread:m,renditionFlow:S}){let O=l?`<dc:identifier id="uid">${l}</dc:identifier>
`:"",A=v?`<dc:title id="title">${v}</dc:title>
`:"",E=d.map((Rt,ue)=>`<dc:creator id="author-${ue}">${Rt}</dc:creator>
`).join(""),ht=_?`<dc:publisher>${_}</dc:publisher>
`:"",oe=g?`<dc:type>${g}</dc:type>
`:"",rt=x?`<dc:language>${x}</dc:language>
`:"",Ct=k?`<dc:date>${mi(k)}</dc:date>
`:"",Ot=y?`<meta property="dcterms:modified">${mi(y)}</meta>
`:"",he=p?p.map(Rt=>`<dc:subject>${Rt}</dc:subject>
`):"",ut="";return ut+=c?`<meta name="cover" content="${f}"/>
`:"",ut+=v?`<meta refines="#title" property="title-type">main</meta>
`:"",ut+=v?`<meta refines="#title" property="file-as">${v}</meta>
`:"",ut+=d.map((Rt,ue)=>`<meta refines="#author-${ue}" property="role" scheme="marc:relators">aut</meta>
<meta refines="#author-${ue}" property="file-as">${Rt}</meta>
`).join(""),ut+=b?`<meta property="rendition:layout">${b}</meta>
`:"",ut+=w?`<meta property="rendition:orientation">${w}</meta>
`:"",ut+=m?`<meta property="rendition:spread">${m}</meta>
`:"",ut+=S?`<meta property="rendition:flow">${S}</meta>
`:"",`
${O}${A}${E}${ht}${oe}${rt}${he}${Ct}${Ot}${ut}`}function r(l){return l.reduce((v,{id:g,href:d,mediaType:_,properties:x})=>(g=g?` id="${g}"`:"",d=d?` href="${d}"`:"",_=_?` media-type="${_}"`:"",x=x&&x.trim()!==""?` properties="${x}"`:"",v+`<item${g}${d}${_}${x} />
`),`
`)}function e(l){return l.reduce((v,{id:g,linear:d,properties:_})=>(g=g?` idref="${g}"`:"",d=d?"":" linear=no",_=_&&_.trim()!==""?` properties="${_}"`:"",v+`<itemref${g}${d}${_} />
`),`
`)}let n=t(this.__data__),a={"xmlns:dc":"http://purl.org/dc/elements/1.1/"},i=r(this.__files__.filter(l=>l.manifest).map(l=>l.manifest)),s={},o=e(this.__files__.filter(l=>l.spine).map(l=>l.spine)),u={toc:this.__data__.enableNCX?"ncx":null,"page-progression-direction":this.__data__.pageDirection},h=`
<?xml version="1.0" encoding="UTF-8"?>
<package xmlns="http://www.idpf.org/2007/opf" version="3.0" unique-identifier="uid" xml:lang="${this.__data__.language}" dir="${this.__data__.textDirection}">
<metadata${I(a)}>${n}</metadata>
<manifest${I(s)}>${i}</manifest>
<spine${I(u)}>${o}</spine>
</package>
  `;this.setFile({path:this.__data__.packagePath,data:h.trim()})};z.prototype.id=function(t){return this.__data__.id=t,this};z.prototype.title=function(t){return this.__data__.title=t||gi,this.isTitleChanged=!0,this};z.prototype.author=function(t){return this.isAuthorChanged?this.__data__.authors.push(t||xr):this.__data__.authors=[t||xr],this.isAuthorChanged=!0,this};z.prototype.publisher=function(t){return this.__data__.publisher=t,this};z.prototype.category=function(t){return this.__data__.category=t,this};z.prototype.language=function(t){return this.__data__.language=t,this};z.prototype.textDirection=function(t){return this.__data__.textDirection=t||"auto",this};z.prototype.pageDirection=function(t){return this.__data__.pageDirection=t||null,this};z.prototype.layout=function(t){return this.__data__.renditionLayout=t||null,this};z.prototype.orientation=function(t){return this.__data__.renditionOrientation=t||null,this};z.prototype.spread=function(t){return this.__data__.renditionSpread=t||null,this};z.prototype.flow=function(t){return this.__data__.renditionFlow=t||null,this};z.prototype.cover=function(t){return this.__data__.cover=t,this};z.prototype.tag=function(t){return this.__data__.tags.push(t),this};z.prototype.style=function(t,r){r||(r={});let e=K.id();return r.rel=r.rel||"stylesheet",r.type=r.type||"text/css",r.href=B(`EPUB/${e}.css`),this.__data__.style+=`
<link${I(r)} />`,this.setFile({path:`EPUB/${e}.css`,data:t,manifest:{id:e,href:B(`EPUB/${e}.css`),mediaType:"text/css"}}),this};z.prototype.publishedAt=function(t){return this.__data__.publishedAt=t,this};z.prototype.modifiedAt=function(t){return this.__data__.modifiedAt=t,this};z.prototype.add=function(){let t=this,r=K.id(),e=`EPUB/${r}.xhtml`,n=_i,a=this.__data__.language,i=this.__data__.textDirection,s="",o="",u="",h=null,l=null,v=null,g=null,d=null,_=[],x=[],k=[],y={getId:function(){return r},getPath:function(){return B(e)},getLink:function(c,f,p){return delete f.href,`<a href="${B(e+(p?"#"+p:""))}"${I(f)}>${c}</a>`},getStyle:function(){return u},getData:function(){return`
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="${a}" lang="${a}" dir="${i}" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<meta charset="utf-8"></meta>
<title>${n}</title>${o}${t.__data__.style}${u}
</head>
<body>${s}
</body>
</html>
      `.trim()},title:function(c){return n=c||_i,y},language:function(c){return a=c,y},textDirection:function(c){return i=c,y},layout:function(c){h=c?`rendition:layout-${c}`:null},orientation:function(c){l=c?`rendition:orientation-${c}`:null},spread:function(c){v=c?`rendition:spread-${c}`:null},spreadPlacement:function(c){g=c?`rendition:page-spread-${c}`:null},flow:function(c){d=c?`rendition:flow-${c}`:null},head:function(c){return o+=`
`+c,y},style:function(c,f){f||(f={});let p=K.id();return f.rel=f.rel||"stylesheet",f.type=f.type||"text/css",f.href=B(`EPUB/${p}.css`),u+=`
<link${I(f)} />`,k.push({path:`EPUB/${p}.css`,data:c,manifest:{id:p,href:B(`EPUB/${p}.css`),mediaType:"text/css"}}),y},body:function(c){return s+=`
`+c,y},section:function(c,f){return s+=c?`
<section${I(f)}>`:`
</section>`,y},h1:function(c,f){return s+=`
<h1${I(f)}>${c}</h1>`,y},h2:function(c,f){return s+=`
<h2${I(f)}>${c}</h2>`,y},h3:function(c,f){return s+=`
<h3${I(f)}>${c}</h3>`,y},h4:function(c,f){return s+=`
<h4${I(f)}>${c}</h4>`,y},h5:function(c,f){return s+=`
<h5${I(f)}>${c}</h5>`,y},h6:function(c,f){return s+=`
<h6${I(f)}>${c}</h6>`,y},p:function(c,f){return s+=`
<p${I(f)}>${c}</p>`,y},span:function(c,f){return s+=`
<span${I(f)}>${c}</span>`,y},a:function(c,f){return s+=`
<a${I(f)}>${c}</a>`,y},ol:function(c,f){return s+=c?`
<ol${I(f)}>`:"</ol>",y},ul:function(c,f){return s+=c?`
<ul${I(f)}>`:"</ul>",y},li:function(c,f){return s+=`
<li${I(f)}>${c}</li>`,y},img:function(c,f){f||(f={});let p=K.id(),b=Ar(c)||"image/jpeg",w=kr(b)||".jpg",m=`EPUB/${p}${w}`;return f.src=B(m),k.push({path:m,data:Re(c),encoding:"base64",manifest:{id:p,href:B(m),mediaType:b}}),s+=`
<img${I(f)} />`,y},audio:function(c,f){f||(f={});let p=K.id(),b=Ar(c)||"audio/mpeg",w=kr(b)||".mp3",m=`EPUB/${p}${w}`,S={src:B(m),type:b};return k.push({path:m,data:Re(c),encoding:"base64",manifest:{id:p,href:B(m),mediaType:b}}),s+=`
<audio${I(f)}>
<source${I(S)} />
</audio>`,y},video:function(c,f){f||(f={});let p=K.id(),b=Ar(c)||"video/mp4",w=kr(b)||".mp4",m=`EPUB/${p}${w}`,S={src:B(m),type:b};return k.push({path:m,data:Re(c),encoding:"base64",manifest:{id:p,href:B(m),mediaType:b}}),s+=`
<video${I(f)}>
<source${I(S)} />
</video>`,y},br:function(){return s+=`
<br />`,y},nav:function(c,f){return x.push({title:c||n,href:B(`${e}${f?"#"+f:""}`)}),y},landmark:function(c,f,p){return _.push({href:B(`${e}${f?"#"+f:""}`),title:c||n,epubType:p||"bodymatter"}),y},valueOf:function(){return{path:e,data:y.getData(),manifest:{id:r,href:B(e),mediaType:"application/xhtml+xml"},spine:{id:r,linear:!0,properties:[h,l,v,g,d].filter(c=>c).join(" ")},toc:x,landmarks:_}},exec:function(){t.setFile(y.valueOf());for(let c of k)t.setFile(c);return y}};return y};z.prototype.getCoverPath=function(){return B(this.__data__.coverPath)};z.prototype.getNavPath=function(){return B(this.__data__.navPath)};z.prototype.getFilePath=function(t){let r=this.__files__.find(e=>e.path===`EPUB/${t}.xhtml`||e.path===t);return r?B(r.path):null};z.prototype.toZip=async function(t){this.update();let r=new pi;for(let e of this.__files__)r.file(e.path,e.data,{base64:e.encoding==="base64"});return await r.generateAsync({type:t||"base64"})};z.prototype.toArray=function(){return this.update(),this.__files__.map(t=>({path:t.path,data:t.data,encoding:t.encoding||"utf8"}))};0&&(module.exports={EPUB});
